import{a as ze}from"./chunk-CCQ7UKTM.js";import{a as Ve,b as $e,c as We}from"./chunk-VDCYMWOT.js";import{c as Ue,h as Ge}from"./chunk-N4OE3BEA.js";import{$a as re,A as ce,B as a,C as b,E as c,F,Fa as Y,G as s,Ha as de,I as Ie,J as Fe,Ka as Re,L as Pe,La as Oe,M as we,Ma as H,N as t,Na as v,O as e,Oa as Q,P as p,Pa as X,Ra as Z,S as me,Sa as Le,T as f,Ta as ee,U as h,Ua as fe,V as P,W as ue,Wa as te,Y as i,Z as E,Za as ie,_,_a as ne,ab as le,ba as ge,bb as be,ca as w,cb as ae,da as N,db as qe,e as Se,ea as B,eb as je,ha as W,hb as se,ia as Ne,j as Ae,ja as T,k as ye,ka as z,l as Ce,la as Be,n as S,o as ke,pa as J,pb as _e,qa as K,ra as ve,s as k,t as I,ta as he,va as Te,wa as De,z as x,za as Me}from"./chunk-SAXKXHZH.js";var C=(()=>{let m=class m{constructor(n){this.http=n,this.profits=0,this.AddUserURL="http://localhost:5227/LinkUpAswan/Apartment/add",this.GetOneUrl="http://localhost:5227/LinkUpAswan/Apartment",this.EditUrl="http://localhost:5227/LinkupAswan/Apartment/edit",this.DeleteUrl="http://localhost:5227/LinkupAswan/Apartment",this.GetAllUrl="http://localhost:5227/LinkupAswan/Apartment/All-Apartment/",this.GetMyApartmentUrl="http://localhost:5227/LinkupAswan/Apartment/list",this.ApiUrl="http://localhost:5227/LinkupAswan/Apartment",this.AddBookingURL="http://localhost:5227/LinkupAswan/Apartment/booking/add",this.deleteBookingURL="http://localhost:5227/LinkupAswan/deleteBooking"}add(n){return this.http.post(this.AddUserURL,n)}GetAll(){return this.http.get(this.GetAllUrl)}GetMyApartments(){return this.http.get(this.GetMyApartmentUrl)}getApartmentByID(n){return this.http.get(`${this.GetOneUrl}/${n}`)}editApartment(n,o){return this.http.put(`${this.EditUrl}/${n}`,o)}deleteApartment(n){return this.http.delete(`${this.DeleteUrl}/${n}`)}calculateProfits(){return this.http.get(`${this.ApiUrl}/profits`)}getAllBookings(){return this.http.get(`${this.ApiUrl}/bookings/`)}getPendingBookings(n){return this.http.get(`${this.ApiUrl}/${n}/bookings/pending`)}getAcceptedBookings(){return this.http.get(`${this.ApiUrl}/bookings/accepted`)}addReviews(n){return this.http.post(`${this.ApiUrl}/${n}/reviews/add`,{headers:{"Content-Type":"application/json"}})}getReviews(n){return this.http.get(`${this.ApiUrl}/${n}/reviews/`)}addBooking(n){return this.http.post(`${this.AddBookingURL}`,n,{headers:{"Content-Type":"application/json"}})}acceptBooking(n){return this.http.put(`${this.ApiUrl}/bookings/accept/${n}`,{})}rejectBooking(n){return this.http.put(`${this.ApiUrl}/bookings/reject/${n}`,{})}DeleteBooking(n){return this.http.delete(`${this.deleteBookingURL}/${n}`)}getFilteredApartments(n,o,l,g,u,A,y){return this.http.get(`${this.ApiUrl}/filter`,{params:{pricerange:n.toString(),furnished:o==null?"":o.toString(),columnName:l,isAscending:g.toString(),pageSize:u.toString(),pageNumber:A.toString(),searchText:y}})}};m.\u0275fac=function(o){return new(o||m)(Ce(Me))},m.\u0275prov=Ae({token:m,factory:m.\u0275fac,providedIn:"root"});let r=m;return r})();var lt=(r,m,d)=>({itemsPerPage:r,currentPage:m,totalItems:d});function at(r,m){if(r&1){let d=me();t(0,"div")(1,"div",59)(2,"div",60)(3,"div",61)(4,"div",62)(5,"div",63)(6,"div",64),p(7,"img",65),e(),t(8,"div",66),p(9,"img",65),e(),t(10,"div",66),p(11,"img",65),e()(),t(12,"button",67),p(13,"i",68),e(),t(14,"button",69),p(15,"i",70),e()()(),t(16,"div",71)(17,"div",72)(18,"h5",73)(19,"a",74),i(20),e()(),t(21,"small"),p(22,"i",75),i(23),e(),t(24,"div",76)(25,"ul",77)(26,"li",78),p(27,"i",79),e(),t(28,"li",78),p(29,"i",79),e(),t(30,"li",78),p(31,"i",79),e(),t(32,"li",78),p(33,"i",80),e(),t(34,"li",78),p(35,"i",81),e()()(),t(36,"div",82)(37,"div",83)(38,"h5",84),i(39),e(),t(40,"span",85),i(41,"/week"),e()(),t(42,"div",86)(43,"button",87),f("click",function(){let o=k(d).$implicit,l=h();return I(l.details(o))}),i(44," Details "),e(),t(45,"button",88),f("click",function(){let o=k(d).$implicit,l=h();return I(l.modal(o))}),i(46," Book "),e()()()()()()()()}if(r&2){let d=m.$implicit,n=m.index,o=h();a(4),ue("id","carouselExample",n,""),a(3),P("src",o.urlImg+d.Image1Path,x),a(2),P("src",o.urlImg+d.Image2Path,x),a(2),P("src",o.urlImg+d.Image3Path,x),a(),F("data-bs-target","#carouselExample"+n),a(2),F("data-bs-target","#carouselExample"+n),a(6),E(d.Name),a(3),_("",d.Address," "),a(16),_("$",d.Price,""),a(4),F("data-index",n),a(2),F("data-index",n)}}var Ke=(()=>{let m=class m{trackByFn(n,o){return o.ID}constructor(n,o,l,g,u){this.apartmentservice=n,this.route=o,this.fB=l,this.account=g,this.toastr=u,this.urlImg="http://localhost:5227/",this.list=[],this.FormData=new FormData,this.apartments=[],this.pricerange=0,this.furnished=null,this.columnName="ID",this.isAscending=!1,this.searchText="",this.priceRanges=[],this.PageNumber=1,this.PageSize=3,this.TotalCount=1,this.BookingForm=this.fB.group({PayType:[,v.required],Checkin:["",v.required],Checkout:["",v.required]})}ngOnInit(){this.Getall(),this.inLoad(),this.loadApartments()}Getall(){var n;return n=this.apartmentservice.GetAll().subscribe({next:o=>{this.list=o,this.TotalCount=this.list.length,this.apartments=this.list.filter((l,g)=>g<3),console.log("ApartmentList",this.apartments)},error:o=>console.error("Error:",o)}),n}modal(n){this.SelectedApartment=n,this.addBooking(n)}inLoad(){let n=document.getElementById("bookingModal"),o=document.querySelector(".close-button"),l=document.getElementById("bookingForm"),g=this.list;document.querySelectorAll(".bookButton").forEach(u=>{u.addEventListener("click",function(){let A=this.getAttribute("data-index");if(A!==null){let y=g[parseInt(A)];document.getElementById("apartmentID").value=y.ID.toString(),document.getElementById("price").value=y.Price.toString(),n.style.display="block"}})}),o.addEventListener("click",()=>{n.style.display="none"}),window.addEventListener("click",u=>{u.target===n&&(n.style.display="none")})}addBooking(n){this.BookingForm.valid?(this.BookingForm.addControl("ApartmentID",new Z(n.ID)),this.BookingForm.addControl("Price",new Z(n.Price)),this.BookingForm.addControl("Profile",new Z(this.profile)),console.log(this.BookingForm.value),this.BookingApartment={ApartmentID:this.BookingForm.controls.ApartmentID?.value,Checkin:this.BookingForm.controls.Checkin?.value,Checkout:this.BookingForm.controls.Checkout?.value,PayType:Number(this.BookingForm.controls.PayType?.value),Price:this.BookingForm.controls.Price?.value,userID:"",profile:this.BookingForm.controls.Profile?.value,Status:"pending",ReviewNo:null,ReviewText:null},console.log(this.BookingApartment),this.apartmentservice.addBooking(this.BookingApartment).subscribe({next:o=>{console.log("Booking Added Successfully",o),this.showSuccess(),this.BookingForm.reset(),this.closeModal()},error:o=>{console.error("Error",o),this.showError()}})):this.BookingForm.markAllAsTouched()}details(n){this.route.navigate(["apartment/apartment-details",n.ID])}closeModal(){document.getElementById("bookingModal").setAttribute("aria-hidden","true")}showSuccess(){this.toastr.success("Booking Added Successfully!")}showError(){this.toastr.error("Sorry Booking Not Added..")}filterbyPrice(){this.priceRanges[0]&&(this.apartments=this.apartments.filter(n=>n.Price>=0&&n.Price<=500)),this.priceRanges[1]&&(this.apartments=this.apartments.filter(n=>n.Price>500&&n.Price<=1e3)),this.priceRanges[2]&&(this.apartments=this.apartments.filter(n=>n.Price>1e3&&n.Price<=1500)),this.priceRanges[3]&&(this.apartments=this.apartments.filter(n=>n.Price>1500&&n.Price<=2e3)),this.priceRanges[4]&&(this.apartments=this.apartments.filter(n=>n.Price>2e3)),this.furnished!==null&&(this.apartments=this.apartments.filter(n=>n.ApartmentStatus===this.furnished))}loadApartments(){this.apartmentservice.getFilteredApartments(this.pricerange,this.furnished,this.columnName,this.isAscending,this.PageSize,this.PageNumber,this.searchText).subscribe(n=>{this.apartments=n.Data,this.PageNumber=n.PageNumber,this.PageSize=n.PageSize,this.TotalCount=n.TotalCount,console.log("Apartments",this.apartments)})}onFilterChange(){this.PageNumber=1,this.loadApartments()}onPageChange(n){this.PageNumber=n,this.loadApartments()}resetFilter(){this.pricerange=0,this.furnished=!1,this.columnName="Price",this.isAscending=!0,this.PageNumber=1,this.searchText="",this.loadApartments()}};m.\u0275fac=function(o){return new(o||m)(b(C),b(de),b(ae),b(se),b(_e))},m.\u0275cmp=S({type:m,selectors:[["app-apartment-list"]],decls:102,vars:24,consts:[[1,"pt-0"],[1,"container"],[1,"row"],[1,"col-xl-4","col-xxl-3"],[1,"p-3","border","bg-light"],[1,"mb-4"],[1,"mb-3"],["for","search",1,"form-label","fw-bold"],["id","search","placeholder","Search by name or city",1,"form-control",3,"ngModelChange","ngModel"],[1,"fw-bold","mt-2"],[1,"form-check"],["type","checkbox","id","range1",1,"form-check-input",3,"ngModelChange","ngModel"],["for","range1",1,"form-check-label"],["type","checkbox","id","range2",1,"form-check-input",3,"ngModelChange","ngModel"],["for","range2",1,"form-check-label"],["type","checkbox","id","range3",1,"form-check-input",3,"ngModelChange","ngModel"],["for","range3",1,"form-check-label"],["type","checkbox","id","range4",1,"form-check-input",3,"ngModelChange","ngModel"],["for","range4",1,"form-check-label"],["type","checkbox","id","range5",1,"form-check-input",3,"ngModelChange","ngModel"],["for","range5",1,"form-check-label"],["for","furnished",1,"form-label","fw-bold","mt-2"],["id","furnished",1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","sortBy",1,"form-label","fw-bold","mt-2"],["id","sortBy",1,"form-select",3,"ngModelChange","ngModel"],["value","ID"],["value","Name"],["value","Price"],["for","order",1,"form-label","fw-bold","mt-2"],["id","order",1,"form-select",3,"ngModelChange","ngModel"],[1,""],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-warning","offset-2",3,"click"],[1,"col-xl-8","col-xxl-9"],[1,"vstack","gap-4"],[4,"ngFor","ngForOf","ngForTrackBy"],["id","bookingModal","tabindex","-1","role","dialog","aria-labelledby","bookingModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","bookingModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["id","bookingForm",3,"ngSubmit","formGroup"],[1,"form-group"],["for","checkin"],["type","date","formControlName","Checkin","id","checkin","required","",1,"form-control"],["for","checkout"],["type","date","formControlName","Checkout","id","checkout","required","",1,"form-control"],["for","payType"],["formControlName","PayType",1,"form-select","js-choice"],["value","","disabled",""],["value","1"],["value","2"],["value","3"],["type","submit",1,"btn","btn-primary","mt-md-3","float-end",3,"disabled"],[3,"pageChange"],[1,"card","shadow","p-2"],[1,"cards","row","g-0"],[1,"col-md-5","position-relative"],["data-bs-ride","carousel",1,"carousel","slide",3,"id"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","",1,"card-img",3,"src"],[1,"carousel-item"],["type","button","data-bs-slide","prev",1,"carousel-control-prev","text-white","bg-black","rounded-circle"],[1,"fas","fa-chevron-left"],["type","button","data-bs-slide","next",1,"carousel-control-next","text-white","bg-black","rounded-circle"],[1,"fas","fa-chevron-right"],[1,"cards","col-md-7"],[1,"card-body","py-md-2","d-flex","flex-column","h-100","position-relative"],[1,"card-title","mb-1"],["href","Apartment-detail.html"],[1,"bi","bi-geo-alt","me-2","mt-3"],[1,"d-flex","justify-content-between","align-items-center","m-2"],[1,"list-inline","mb-0"],[1,"list-inline-item","me-0","small"],[1,"fa-solid","fa-star","text-warning"],[1,"fa-solid","fa-star-half-alt","text-warning"],[1,"fa-solid","fa-star","text-secondary"],[1,"d-sm-flex","justify-content-sm-between","align-items-center","mt-3","mt-md-auto"],[1,"d-flex","align-items-center"],[1,"fw-bold","mb-0","me-1"],[1,"mb-0","me-2"],[1,"mt-3","mt-sm-0","w-50"],["type","button",1,"bookButton","btn","btn-sm","btn-primary","mb-0","w-50",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#bookingModal",1,"bookButton","btn","btn-sm","btn-dark","mb-0","w-50",3,"click"]],template:function(o,l){o&1&&(t(0,"section",0)(1,"div",1)(2,"div",2)(3,"aside",3)(4,"div",4)(5,"h2",5),i(6,"Apartment List"),e(),t(7,"div",6)(8,"label",7),i(9,"Search:"),e(),t(10,"input",8),B("ngModelChange",function(u){return N(l.searchText,u)||(l.searchText=u),u}),e()(),t(11,"div",6)(12,"h5",9),i(13,"Price Range:"),e(),t(14,"div",10)(15,"input",11),B("ngModelChange",function(u){return N(l.priceRanges[0],u)||(l.priceRanges[0]=u),u}),e(),t(16,"label",12),i(17," $0 - $500 "),e()(),t(18,"div",10)(19,"input",13),B("ngModelChange",function(u){return N(l.priceRanges[1],u)||(l.priceRanges[1]=u),u}),e(),t(20,"label",14),i(21," $500 - $1000 "),e()(),t(22,"div",10)(23,"input",15),B("ngModelChange",function(u){return N(l.priceRanges[2],u)||(l.priceRanges[2]=u),u}),e(),t(24,"label",16),i(25," $1000 - $1500 "),e()(),t(26,"div",10)(27,"input",17),B("ngModelChange",function(u){return N(l.priceRanges[3],u)||(l.priceRanges[3]=u),u}),e(),t(28,"label",18),i(29," $1500 - $2000 "),e()(),t(30,"div",10)(31,"input",19),B("ngModelChange",function(u){return N(l.priceRanges[4],u)||(l.priceRanges[4]=u),u}),e(),t(32,"label",20),i(33," $2000 and above "),e()()(),t(34,"div",6)(35,"label",21),i(36,"Furnished:"),e(),t(37,"select",22),B("ngModelChange",function(u){return N(l.furnished,u)||(l.furnished=u),u}),t(38,"option",23),i(39,"Yes"),e(),t(40,"option",23),i(41,"No"),e()()(),t(42,"div",6)(43,"label",24),i(44,"Sort By:"),e(),t(45,"select",25),B("ngModelChange",function(u){return N(l.columnName,u)||(l.columnName=u),u}),t(46,"option",26),i(47,"ID"),e(),t(48,"option",27),i(49,"Name"),e(),t(50,"option",28),i(51,"Price"),e()(),t(52,"label",29),i(53,"Order:"),e(),t(54,"select",30),B("ngModelChange",function(u){return N(l.isAscending,u)||(l.isAscending=u),u}),t(55,"option",23),i(56,"Ascending"),e(),t(57,"option",23),i(58,"Descending"),e()()(),t(59,"div",31)(60,"button",32),f("click",function(){return l.onFilterChange()}),i(61,"Apply Filters"),e(),t(62,"button",33),f("click",function(){return l.resetFilter()}),i(63,"Clear Filters"),e()()()(),t(64,"div",34)(65,"div",35),c(66,at,47,12,"div",36),T(67,"paginate"),t(68,"div",37)(69,"div",38)(70,"div",39)(71,"div",40)(72,"h5",41),i(73,"Book Apartment"),e(),t(74,"button",42)(75,"span",43),i(76,"\xD7"),e()()(),t(77,"div",44)(78,"form",45),f("ngSubmit",function(){return l.addBooking(l.SelectedApartment)}),t(79,"div",46)(80,"label",47),i(81,"Check-in Date:"),e(),p(82,"input",48),e(),t(83,"div",46)(84,"label",49),i(85,"Check-out Date:"),e(),p(86,"input",50),e(),t(87,"div",46)(88,"label",51),i(89,"Payment Type:"),e(),t(90,"select",52)(91,"option",53),i(92,"Select Payment Method"),e(),t(93,"option",54),i(94,"Cash"),e(),t(95,"option",55),i(96,"PayPal"),e(),t(97,"option",56),i(98,"Credit Card"),e()()(),t(99,"button",57),i(100,"Submit Booking"),e()()()()()(),t(101,"pagination-controls",58),f("pageChange",function(u){return l.onPageChange(u)}),e()()()()()()),o&2&&(a(10),w("ngModel",l.searchText),a(5),w("ngModel",l.priceRanges[0]),a(4),w("ngModel",l.priceRanges[1]),a(4),w("ngModel",l.priceRanges[2]),a(4),w("ngModel",l.priceRanges[3]),a(4),w("ngModel",l.priceRanges[4]),a(6),w("ngModel",l.furnished),a(),s("ngValue",!0),a(2),s("ngValue",!1),a(5),w("ngModel",l.columnName),a(9),w("ngModel",l.isAscending),a(),s("ngValue",!0),a(2),s("ngValue",!1),a(9),s("ngForOf",Be(67,17,l.apartments,Ne(20,lt,l.PageSize,l.PageNumber,l.TotalCount)))("ngForTrackBy",l.trackByFn),a(12),s("formGroup",l.BookingForm),a(21),s("disabled",l.BookingForm.invalid))},dependencies:[$e,K,ee,re,le,H,Oe,ne,Q,X,be,te,ie,Le,Ve],styles:["#carouselExample[_ngcontent-%COMP%]   .carousel-control-next[_ngcontent-%COMP%], #carouselExample[_ngcontent-%COMP%]   .carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%], .carousel-control-prev[_ngcontent-%COMP%]{width:40px;height:40px;top:100px}.avatar[_ngcontent-%COMP%]{width:30px;height:30px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.card-img-overlay[_ngcontent-%COMP%]{bottom:50px}.card-img-overlay[_ngcontent-%COMP%]{top:inherit}.bg-dark[_ngcontent-%COMP%]{opacity:.7}"]});let r=m;return r})();var Ye=Se(ze());var ot=(r,m)=>({"text-danger ":r,"d-none":m});function mt(r,m){r&1&&(t(0,"small"),i(1,"Apartment Name is required."),e())}function dt(r,m){if(r&1&&(t(0,"div",67),c(1,mt,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("Name"))==null?null:d.errors)}}function st(r,m){r&1&&(t(0,"small"),i(1,"Selecting Country is required."),e())}function pt(r,m){if(r&1&&(t(0,"div",67),c(1,st,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("Country"))==null?null:d.errors)}}function ct(r,m){r&1&&(t(0,"small"),i(1,"Selecting State is required."),e())}function ut(r,m){if(r&1&&(t(0,"div",67),c(1,ct,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("State"))==null?null:d.errors)}}function gt(r,m){r&1&&(t(0,"small"),i(1,"City is required."),e())}function vt(r,m){if(r&1&&(t(0,"div",67),c(1,gt,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("City"))==null?null:d.errors)}}function ht(r,m){r&1&&(t(0,"small"),i(1,"Address is required."),e())}function ft(r,m){if(r&1&&(t(0,"div",67),c(1,ht,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("Address"))==null?null:d.errors)}}function bt(r,m){r&1&&(t(0,"small"),i(1,"Phone Number is required."),e())}function _t(r,m){r&1&&(t(0,"small"),i(1,"Phone Number must be 10 digits with out first 0."),e())}function xt(r,m){if(r&1&&(t(0,"div",67),c(1,bt,2,0,"small",68)(2,_t,2,0,"small",68),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.ApartmentForm.get("PhoneNumber"))==null?null:d.errors),a(),s("ngIf",(n=o.ApartmentForm.get("PhoneNumber"))==null?null:n.errors)}}function Et(r,m){r&1&&(t(0,"small"),i(1,"Building Number is required."),e())}function St(r,m){r&1&&(t(0,"small"),i(1,"Building Number must be numeric."),e())}function At(r,m){if(r&1&&(t(0,"div",67),c(1,Et,2,0,"small",68)(2,St,2,0,"small",68),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.ApartmentForm.get("BuildingNum"))==null?null:d.errors),a(),s("ngIf",(n=o.ApartmentForm.get("BuildingNum"))==null?null:n.errors)}}function yt(r,m){r&1&&(t(0,"small"),i(1,"Description is required."),e())}function Ct(r,m){if(r&1&&(t(0,"div",67),c(1,yt,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("Description"))==null?null:d.errors)}}function kt(r,m){r&1&&(t(0,"small"),i(1,"Floor Number is required."),e())}function It(r,m){r&1&&(t(0,"small"),i(1,"Floor Number must be numeric."),e())}function Ft(r,m){if(r&1&&(t(0,"div",67),c(1,kt,2,0,"small",68),p(2,"br"),c(3,It,2,0,"small",68),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.ApartmentForm.get("FloorNumber"))==null?null:d.errors),a(2),s("ngIf",(n=o.ApartmentForm.get("FloorNumber"))==null?null:n.errors)}}function Pt(r,m){r&1&&(t(0,"small"),i(1,"Total Rooms is required."),e())}function wt(r,m){r&1&&(t(0,"small"),i(1,"Total Rooms must be numeric."),e())}function Nt(r,m){if(r&1&&(t(0,"div",67),c(1,Pt,2,0,"small",68),p(2,"br"),c(3,wt,2,0,"small",68),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.ApartmentForm.get("TotalRooms"))==null?null:d.errors),a(2),s("ngIf",(n=o.ApartmentForm.get("TotalRooms"))==null?null:n.errors)}}function Bt(r,m){r&1&&(t(0,"small"),i(1,"Apartment Status is required."),e())}function Tt(r,m){if(r&1&&(t(0,"div",67),c(1,Bt,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("ApartmentStatus"))==null?null:d.errors)}}function Dt(r,m){r&1&&(t(0,"small"),i(1,"Price is required."),e())}function Mt(r,m){r&1&&(t(0,"small"),i(1,"Price must be a valid number (e.g., 10 or 10.99)."),e())}function Rt(r,m){if(r&1&&(t(0,"div",67),c(1,Dt,2,0,"small",68)(2,Mt,2,0,"small",68),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.ApartmentForm.get("Price"))==null?null:d.errors),a(),s("ngIf",(n=o.ApartmentForm.get("Price"))==null?null:n.errors)}}function Ot(r,m){r&1&&(t(0,"small"),i(1,"Discount must be a valid number (e.g., 10 or 10.99)."),e())}function Lt(r,m){if(r&1&&(t(0,"div",67),c(1,Ot,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("Discount"))==null?null:d.errors)}}function qt(r,m){r&1&&(t(0,"small"),i(1,"Cancellation Policy is required."),e())}function jt(r,m){if(r&1&&(t(0,"div",67),c(1,qt,2,0,"small",68),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.ApartmentForm.get("CancellationPolicy"))==null?null:d.errors)}}var He=(()=>{let m=class m{constructor(n,o,l){this.fb=n,this.ApartmentService=o,this.toastr=l,this.FormData=new FormData,this.validImages=!1,this.ApartmentForm=this.fb.group({Name:["",v.required],Country:["",v.required],State:["",v.required],City:["",v.required],Address:["",[v.required]],PhoneNumber:["",[v.required,v.pattern(/^\d{10}$/)]],BuildingNum:["",[v.required,v.pattern(/^\d+$/)]],Description:["",v.required],Price:["",[v.required,v.pattern(/^\d+(\.\d{1,2})?$/)]],Discount:["",v.pattern(/^\d+(\.\d{1,2})?$/)],CancellationPolicy:["",v.required],FloorNumber:["",[v.required]],TotalRooms:["",[v.required]],ApartmentStatus:["",v.required]})}ngOnInit(){}SelectImages(n){n.target.files.length==3?(this.validImages=!0,this.Image1=n.target.files[0],this.Image2=n.target.files[1],this.Image3=n.target.files[2],console.log(n.target.files)):this.validImages=!1}onSubmit(){if(this.ApartmentForm.valid){console.log(this.ApartmentForm.value);for(let n in this.ApartmentForm.controls)console.log(n,this.ApartmentForm.controls[n].value),this.FormData.append(n,this.ApartmentForm.controls[n].value);this.FormData.append("Image1",this.Image1??""),this.FormData.append("Image2",this.Image2??""),this.FormData.append("Image3",this.Image3??""),this.ApartmentService.add(this.FormData).subscribe({next:n=>{console.log("Success",n),this.showSuccess()},error:n=>{console.error("Error",n),this.showError()}})}else this.ApartmentForm.markAllAsTouched()}ngAfterViewInit(){let n=document.querySelector(".bs-stepper");n?this.stepper=new Ye.default(n,{linear:!1,animation:!0}):console.error("Stepper element not found")}next(){this.stepper&&this.stepper.next()}previous(){this.stepper&&this.stepper.previous()}showSuccess(){this.toastr.success("Apartment Added Successfully!")}showError(){this.toastr.error("Sorry Apartment Not Added..")}};m.\u0275fac=function(o){return new(o||m)(b(ae),b(C),b(_e))},m.\u0275cmp=S({type:m,selectors:[["app-add-apartment"]],decls:221,vars:20,consts:[[1,"pb-0"],[1,"container"],[1,"row"],[1,"col-12","text-center"],[1,"fs-2","mb-2","p-5"],["id","stepper",1,"bs-stepper","stepper-outline"],["role","tablist",1,"bs-stepper-header"],["data-target","#step-1",1,"step"],[1,"text-center"],["type","button","role","tab","id","steppertrigger1","aria-controls","step-1",1,"btn","btn-link","step-trigger","mb-0"],[1,"bs-stepper-circle"],[1,"bs-stepper-label","d-none","d-md-block"],[1,"line"],["data-target","#step-2",1,"step"],["type","button","role","tab","id","steppertrigger2","aria-controls","step-2",1,"btn","btn-link","step-trigger","mb-0"],["data-target","#step-3",1,"step"],["type","button","role","tab","id","steppertrigger3","aria-controls","step-3",1,"btn","btn-link","step-trigger","mb-0"],[1,"bs-stepper-content","p-0","pt-4","pt-md-5"],[1,"row","g-4"],[1,"col-12"],[3,"ngSubmit","formGroup"],["id","step-1","role","tabpanel","aria-labelledby","steppertrigger1",1,"content","fade"],[1,"vstack","gap-4"],[1,"mb-0"],[1,"card","shadow"],[1,"card-header","border-bottom"],[1,"card-body"],[1,"form-label"],["formControlName","Name","type","text","placeholder","Enter place name",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"row","g-3"],[1,"col-md-6"],["formControlName","Country",1,"form-select","js-choice"],["value","","disabled",""],["value","EG"],["value","IN"],["value","USA"],["value","JA"],["value","UK"],["formControlName","State",1,"form-select","js-choice"],["formControlName","City",1,"form-select","js-choice"],["type","text","formControlName","Address","placeholder","Enter Apartment address",1,"form-control"],["formControlName","PhoneNumber","type","text","placeholder","Enter phone number",1,"form-control"],["formControlName","BuildingNum","type","text","placeholder","Enter Building Number",1,"form-control"],["id","map",1,"col-12"],["src",ce`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.9663095343008!2d-74.00425878428698!3d40.74076684379132!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259bf5c1654f3%3A0xc80f9cfce5383d5d!2sGoogle!5e0!3m2!1sen!2sin!4v1586000412513!5m2!1sen!2sin`,"height","500","aria-hidden","false","tabindex","0",1,"w-100","h-300px","grayscale","rounded",2,"border","0"],["type","file","accept","image/gif, image/jpeg, image/png","multiple","",1,"form-control",3,"change"],[1,"small","mb-0","mt-2",3,"ngClass"],[1,"text-end"],["type","button",1,"btn","btn-primary","next-btn","mb-0",3,"click"],["id","step-2","role","tabpanel","aria-labelledby","steppertrigger2",1,"content","fade"],["formControlName","Description","rows","3","placeholder","Enter Description",1,"form-control"],[1,"col-md-4"],["type","number","formControlName","FloorNumber","placeholder","Enter floor number",1,"form-control"],["type","number","formControlName","TotalRooms","placeholder","Enter total rooms",1,"form-control"],["formControlName","ApartmentStatus",1,"form-select","js-choice"],["value","false"],["value","true"],[1,"hstack","gap-2","flex-wrap","justify-content-between"],["type","button",1,"btn","btn-secondary","prev-btn","mb-0",3,"click"],["id","step-3","role","tabpanel","aria-labelledby","steppertrigger3",1,"content","fade"],["type","text","formControlName","Price","placeholder","Enter price",1,"form-control"],["type","text","formControlName","Discount","placeholder","Enter discount",1,"form-control"],[1,"col-md-12"],["formControlName","CancellationPolicy","rows","3","placeholder","Enter cancellation policy",1,"form-control"],[1,"d-flex","flex-row","justify-content-between","col-12"],["type","submit",1,"btn","btn-success","col-2","mb-0","text-nowrap",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(o,l){if(o&1&&(t(0,"main")(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),i(6,"Add Apartment Details"),e()()()()(),t(7,"section")(8,"div",1)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"button",9)(14,"span",10),i(15,"1"),e()(),t(16,"h6",11),i(17,"Basic Information"),e()()(),p(18,"div",12),t(19,"div",13)(20,"div",8)(21,"button",14)(22,"span",10),i(23,"2"),e()(),t(24,"h6",11),i(25,"Detailed Information"),e()()(),p(26,"div",12),t(27,"div",15)(28,"div",8)(29,"button",16)(30,"span",10),i(31,"3"),e()(),t(32,"h6",11),i(33,"Price & Policy"),e()()()(),t(34,"div",17)(35,"div",18)(36,"div",19)(37,"form",20),f("ngSubmit",function(){return l.onSubmit()}),t(38,"div",21)(39,"div",22)(40,"h4",23),i(41,"Basic Information"),e(),t(42,"div",24)(43,"div",25)(44,"h5",23),i(45,"Listing Name"),e()(),t(46,"div",26)(47,"div",18)(48,"div",19)(49,"label",27),i(50,"Apartment Name *"),e(),p(51,"input",28),c(52,dt,2,1,"div",29),e()()()(),t(53,"div",24)(54,"div",25)(55,"h5",23),i(56,"Listing Location"),e()(),t(57,"div",26)(58,"div",30)(59,"div",31)(60,"label",27),i(61,"Country/Region *"),e(),t(62,"select",32)(63,"option",33),i(64,"Select Country"),e(),t(65,"option",34),i(66,"Egypt"),e(),t(67,"option",35),i(68,"India"),e(),t(69,"option",36),i(70,"USA"),e(),t(71,"option",37),i(72,"Japan"),e(),t(73,"option",38),i(74,"United Kingdom"),e()(),c(75,pt,2,1,"div",29),e(),t(76,"div",31)(77,"label",27),i(78,"State *"),e(),t(79,"select",39)(80,"option",33),i(81,"Select State"),e(),t(82,"option"),i(83,"Aswan"),e(),t(84,"option"),i(85,"Alexandria"),e(),t(86,"option"),i(87,"Cairo"),e(),t(88,"option"),i(89,"Luxor"),e()(),c(90,ut,2,1,"div",29),e(),t(91,"div",31)(92,"label",27),i(93,"City *"),e(),t(94,"select",40)(95,"option",33),i(96,"Select City"),e(),t(97,"option"),i(98,"Aswan City"),e(),t(99,"option"),i(100,"Gharb Soheil"),e(),t(101,"option"),i(102,"Abo Simble"),e(),t(103,"option"),i(104,"Edfu"),e(),t(105,"option"),i(106,"Komombo"),e(),t(107,"option"),i(108,"Nasr ElNouba"),e()(),c(109,vt,2,1,"div",29),e(),t(110,"div",31)(111,"label",27),i(112," Address *"),e(),p(113,"input",41),c(114,ft,2,1,"div",29),e(),t(115,"div",31)(116,"label",27),i(117,"Phone Number *"),e(),p(118,"input",42),c(119,xt,3,2,"div",29),e(),t(120,"div",31)(121,"label",27),i(122,"Building Number *"),e(),p(123,"input",43),c(124,At,3,2,"div",29),e(),t(125,"div",44),p(126,"iframe",45),e()()()(),t(127,"div",24)(128,"div",25)(129,"h5",23),i(130,"Upload Images"),e()(),t(131,"div",26)(132,"div",30)(133,"div",19)(134,"label",27),i(135,"Upload thumbnail image *"),e(),t(136,"input",46),f("change",function(u){return l.SelectImages(u)}),e(),t(137,"p",47)(138,"b"),i(139,"Note:"),e(),i(140," Upload only 3 images. Only JPG, JPEG, and PNG are allowed. Suggested dimensions: 600px * 450px."),e()()()()(),t(141,"div",48)(142,"button",49),f("click",function(){return l.next()}),i(143,"Next"),e()()()(),t(144,"div",50)(145,"div",22)(146,"h4",23),i(147,"Detailed Information"),e(),t(148,"div",24)(149,"div",25)(150,"h5",23),i(151,"Overview"),e()(),t(152,"div",26)(153,"div",18)(154,"div",19)(155,"label",27),i(156,"Description *"),e(),p(157,"textarea",51),c(158,Ct,2,1,"div",29),e()()()(),t(159,"div",24)(160,"div",25)(161,"h5",23),i(162,"Size Of Your Listing"),e()(),t(163,"div",26)(164,"div",18)(165,"div",52)(166,"label",27),i(167,"Floor Number *"),e(),p(168,"input",53),c(169,Ft,4,2,"div",29),e(),t(170,"div",52)(171,"label",27),i(172,"Total Room *"),e(),p(173,"input",54),c(174,Nt,4,2,"div",29),e(),t(175,"div",52)(176,"label",27),i(177,"Apartment Status *"),e(),t(178,"select",55)(179,"option",33),i(180,"Select item"),e(),t(181,"option",56),i(182,"Empty"),e(),t(183,"option",57),i(184,"Fully Furnished"),e()(),c(185,Tt,2,1,"div",29),e()()()(),t(186,"div",58)(187,"button",59),f("click",function(){return l.previous()}),i(188,"Previous"),e(),t(189,"button",49),f("click",function(){return l.next()}),i(190,"Next"),e()()()(),t(191,"div",60)(192,"div",22)(193,"h4",23),i(194,"Price & Policy"),e(),t(195,"div",24)(196,"div",25)(197,"h5",23),i(198,"Listing Price"),e()(),t(199,"div",26)(200,"div",18)(201,"div",31)(202,"label",27),i(203,"Base Price *"),e(),p(204,"input",61),c(205,Rt,3,2,"div",29),e(),t(206,"div",31)(207,"label",27),i(208,"Discount *"),e(),p(209,"input",62),c(210,Lt,2,1,"div",29),e(),t(211,"div",63)(212,"label",27),i(213,"Cancellation Policy *"),e(),p(214,"textarea",64),c(215,jt,2,1,"div",29),e()()()(),t(216,"div",65)(217,"button",59),f("click",function(){return l.previous()}),i(218,"Previous"),e(),t(219,"button",66),i(220,"Add Listing"),e()()()()()()()()()()()()),o&2){let g,u,A,y,D,M,R,O,L,q,j,U,G,V;a(37),s("formGroup",l.ApartmentForm),a(15),s("ngIf",((g=l.ApartmentForm.get("Name"))==null?null:g.touched)&&((g=l.ApartmentForm.get("Name"))==null?null:g.invalid)),a(23),s("ngIf",((u=l.ApartmentForm.get("Country"))==null?null:u.touched)&&((u=l.ApartmentForm.get("Country"))==null?null:u.invalid)),a(15),s("ngIf",((A=l.ApartmentForm.get("State"))==null?null:A.touched)&&((A=l.ApartmentForm.get("State"))==null?null:A.invalid)),a(19),s("ngIf",((y=l.ApartmentForm.get("City"))==null?null:y.touched)&&((y=l.ApartmentForm.get("City"))==null?null:y.invalid)),a(5),s("ngIf",((D=l.ApartmentForm.get("Address"))==null?null:D.touched)&&((D=l.ApartmentForm.get("Address"))==null?null:D.invalid)),a(5),s("ngIf",((M=l.ApartmentForm.get("PhoneNumber"))==null?null:M.touched)&&((M=l.ApartmentForm.get("PhoneNumber"))==null?null:M.invalid)),a(5),s("ngIf",((R=l.ApartmentForm.get("BuildingNum"))==null?null:R.touched)&&((R=l.ApartmentForm.get("BuildingNum"))==null?null:R.invalid)),a(13),s("ngClass",W(17,ot,l.validImages==!1,l.validImages==!0)),a(21),s("ngIf",((O=l.ApartmentForm.get("Description"))==null?null:O.touched)&&((O=l.ApartmentForm.get("Description"))==null?null:O.invalid)),a(11),s("ngIf",((L=l.ApartmentForm.get("FloorNumber"))==null?null:L.touched)&&((L=l.ApartmentForm.get("FloorNumber"))==null?null:L.invalid)),a(5),s("ngIf",((q=l.ApartmentForm.get("TotalRooms"))==null?null:q.touched)&&((q=l.ApartmentForm.get("TotalRooms"))==null?null:q.invalid)),a(11),s("ngIf",((j=l.ApartmentForm.get("ApartmentStatus"))==null?null:j.touched)&&((j=l.ApartmentForm.get("ApartmentStatus"))==null?null:j.invalid)),a(20),s("ngIf",((U=l.ApartmentForm.get("Price"))==null?null:U.touched)&&((U=l.ApartmentForm.get("Price"))==null?null:U.invalid)),a(5),s("ngIf",((G=l.ApartmentForm.get("Discount"))==null?null:G.touched)&&((G=l.ApartmentForm.get("Discount"))==null?null:G.invalid)),a(5),s("ngIf",((V=l.ApartmentForm.get("CancellationPolicy"))==null?null:V.touched)&&((V=l.ApartmentForm.get("CancellationPolicy"))==null?null:V.invalid)),a(4),s("disabled",l.ApartmentForm.invalid)}},dependencies:[J,ve,ee,re,le,H,fe,ne,Q,X,te,ie]});let r=m;return r})();var Qe=Se(ze());var Ut=(r,m)=>({"text-danger ":r,"d-none":m});function Gt(r,m){r&1&&(t(0,"small"),i(1,"Apartment Name is required."),e())}function Vt(r,m){if(r&1&&(t(0,"div",68),c(1,Gt,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("Name"))==null?null:d.errors)}}function $t(r,m){r&1&&(t(0,"small"),i(1,"Selecting Country is required."),e())}function Wt(r,m){if(r&1&&(t(0,"div",68),c(1,$t,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("Country"))==null?null:d.errors)}}function zt(r,m){r&1&&(t(0,"small"),i(1,"Selecting State is required."),e())}function Jt(r,m){if(r&1&&(t(0,"div",68),c(1,zt,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("State"))==null?null:d.errors)}}function Kt(r,m){r&1&&(t(0,"small"),i(1,"City is required."),e())}function Yt(r,m){if(r&1&&(t(0,"div",68),c(1,Kt,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("City"))==null?null:d.errors)}}function Ht(r,m){r&1&&(t(0,"small"),i(1,"Address is required."),e())}function Qt(r,m){if(r&1&&(t(0,"div",68),c(1,Ht,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("Address"))==null?null:d.errors)}}function Xt(r,m){r&1&&(t(0,"small"),i(1,"Phone Number is required."),e())}function Zt(r,m){r&1&&(t(0,"small"),i(1,"Phone Number must be 10 digits with out first 0."),e())}function ei(r,m){if(r&1&&(t(0,"div",68),c(1,Xt,2,0,"small",69)(2,Zt,2,0,"small",69),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.EditApartmentForm.get("PhoneNumber"))==null?null:d.errors),a(),s("ngIf",(n=o.EditApartmentForm.get("PhoneNumber"))==null?null:n.errors)}}function ti(r,m){r&1&&(t(0,"small"),i(1,"Building Number is required."),e())}function ii(r,m){r&1&&(t(0,"small"),i(1,"Building Number must be numeric."),e())}function ni(r,m){if(r&1&&(t(0,"div",68),c(1,ti,2,0,"small",69)(2,ii,2,0,"small",69),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.EditApartmentForm.get("BuildingNum"))==null?null:d.errors),a(),s("ngIf",(n=o.EditApartmentForm.get("BuildingNum"))==null?null:n.errors)}}function ri(r,m){r&1&&(t(0,"small"),i(1,"Description is required."),e())}function li(r,m){if(r&1&&(t(0,"div",68),c(1,ri,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("Description"))==null?null:d.errors)}}function ai(r,m){r&1&&(t(0,"small"),i(1,"Floor Number is required."),e())}function oi(r,m){r&1&&(t(0,"small"),i(1,"Floor Number must be numeric."),e())}function mi(r,m){if(r&1&&(t(0,"div",68),c(1,ai,2,0,"small",69),p(2,"br"),c(3,oi,2,0,"small",69),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.EditApartmentForm.get("FloorNumber"))==null?null:d.errors),a(2),s("ngIf",(n=o.EditApartmentForm.get("FloorNumber"))==null?null:n.errors)}}function di(r,m){r&1&&(t(0,"small"),i(1,"Total Rooms is required."),e())}function si(r,m){r&1&&(t(0,"small"),i(1,"Total Rooms must be numeric."),e())}function pi(r,m){if(r&1&&(t(0,"div",68),c(1,di,2,0,"small",69),p(2,"br"),c(3,si,2,0,"small",69),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.EditApartmentForm.get("TotalRooms"))==null?null:d.errors),a(2),s("ngIf",(n=o.EditApartmentForm.get("TotalRooms"))==null?null:n.errors)}}function ci(r,m){r&1&&(t(0,"small"),i(1,"Apartment Status is required."),e())}function ui(r,m){if(r&1&&(t(0,"div",68),c(1,ci,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("ApartmentStatus"))==null?null:d.errors)}}function gi(r,m){r&1&&(t(0,"small"),i(1,"Price is required."),e())}function vi(r,m){r&1&&(t(0,"small"),i(1,"Price must be a valid number (e.g., 10 or 10.99)."),e())}function hi(r,m){if(r&1&&(t(0,"div",68),c(1,gi,2,0,"small",69)(2,vi,2,0,"small",69),e()),r&2){let d,n,o=h();a(),s("ngIf",(d=o.EditApartmentForm.get("Price"))==null?null:d.errors),a(),s("ngIf",(n=o.EditApartmentForm.get("Price"))==null?null:n.errors)}}function fi(r,m){r&1&&(t(0,"small"),i(1,"Discount must be a valid number (e.g., 10 or 10.99)."),e())}function bi(r,m){if(r&1&&(t(0,"div",68),c(1,fi,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("Discount"))==null?null:d.errors)}}function _i(r,m){r&1&&(t(0,"small"),i(1,"Cancellation Policy is required."),e())}function xi(r,m){if(r&1&&(t(0,"div",68),c(1,_i,2,0,"small",69),e()),r&2){let d,n=h();a(),s("ngIf",(d=n.EditApartmentForm.get("CancellationPolicy"))==null?null:d.errors)}}var Xe=(()=>{let m=class m{constructor(n,o,l){this.fb=n,this.ApartmentService=o,this.router=l,this.FormData=new FormData,this.validImages=!1,this.ID=0,this.router.params.subscribe({next:g=>{console.log(g.id),this.ID=g.id},error:g=>{console.log(g)}}),this.getApartmentByID(this.ID).subscribe({next:g=>{this.apartment=g,console.log("data:",g),console.log(this.apartment),this.EditApartmentForm=this.fb.group({Name:[this.apartment?.Name,v.required],Country:[this.apartment?.Country,v.required],State:[this.apartment?.State,v.required],City:[this.apartment?.City,v.required],Address:[this.apartment?.Address,[v.required]],PhoneNumber:[this.apartment?.PhoneNumber,[v.required,v.pattern(/^\d{10}$/)]],BuildingNum:[this.apartment?.BuildingNum,[v.required,v.pattern(/^\d+$/)]],Description:[this.apartment?.Description,v.required],Price:[this.apartment?.Price,[v.required,v.pattern(/^\d+(\.\d{1,2})?$/)]],Discount:[this.apartment?.Discount,v.pattern(/^\d+(\.\d{1,2})?$/)],CancellationPolicy:[this.apartment?.CancellationPolicy,v.required],FloorNumber:[this.apartment?.FloorNumber,[v.required]],TotalRooms:[this.apartment?.TotalRooms,[v.required]],ApartmentStatus:[this.apartment?.ApartmentStatus,v.required]})},error(g){console.log(g)}})}ngOnInit(){}SelectImages(n){n.target.files.length==3?(this.validImages=!0,this.Image1=n.target.files[0],this.Image2=n.target.files[1],this.Image3=n.target.files[2],console.log(n.target.files)):this.validImages=!1}onSubmit(){if(this.EditApartmentForm.valid){console.log(this.EditApartmentForm.value);for(let n in this.EditApartmentForm.controls)console.log(n,this.EditApartmentForm.controls[n].value),this.FormData.append(n,this.EditApartmentForm.controls[n].value);this.FormData.append("Image1",this.Image1??""),this.FormData.append("Image2",this.Image2??""),this.FormData.append("Image3",this.Image3??""),this.ApartmentService.editApartment(this.ID,this.FormData).subscribe({next:n=>{console.log("Success",n)},error:n=>{console.error("Error",n)}})}else this.EditApartmentForm.markAllAsTouched()}ngAfterViewInit(){let n=document.querySelector(".bs-stepper");n?this.stepper=new Qe.default(n,{linear:!1,animation:!0}):console.error("Stepper element not found")}next(){this.stepper&&this.stepper.next()}previous(){this.stepper&&this.stepper.previous()}getApartmentByID(n){return this.ApartmentService.getApartmentByID(n)}};m.\u0275fac=function(o){return new(o||m)(b(ae),b(C),b(Y))},m.\u0275cmp=S({type:m,selectors:[["Edit-apartment"]],decls:221,vars:34,consts:[[1,"pb-0"],[1,"container"],[1,"row"],[1,"col-12","text-center"],[1,"fs-2","mb-2","p-5"],["id","stepper",1,"bs-stepper","stepper-outline"],["role","tablist",1,"bs-stepper-header"],["data-target","#step-1",1,"step"],[1,"text-center"],["type","button","role","tab","id","steppertrigger1","aria-controls","step-1",1,"btn","btn-link","step-trigger","mb-0"],[1,"bs-stepper-circle"],[1,"bs-stepper-label","d-none","d-md-block"],[1,"line"],["data-target","#step-2",1,"step"],["type","button","role","tab","id","steppertrigger2","aria-controls","step-2",1,"btn","btn-link","step-trigger","mb-0"],["data-target","#step-3",1,"step"],["type","button","role","tab","id","steppertrigger3","aria-controls","step-3",1,"btn","btn-link","step-trigger","mb-0"],[1,"bs-stepper-content","p-0","pt-4","pt-md-5"],[1,"row","g-4"],[1,"col-12"],[3,"ngSubmit","formGroup"],["id","step-1","role","tabpanel","aria-labelledby","steppertrigger1",1,"content","fade"],[1,"vstack","gap-4"],[1,"mb-0"],[1,"card","shadow"],[1,"card-header","border-bottom"],[1,"card-body"],[1,"form-label"],["formControlName","Name","type","text",1,"form-control",3,"value"],["class","text-danger",4,"ngIf"],[1,"row","g-3"],[1,"col-md-6"],["formControlName","Country",1,"form-select","js-choice",3,"value"],["value","","disabled",""],["value","EG"],["value","IN"],["value","USA"],["value","JA"],["value","UK"],["formControlName","State",1,"form-select","js-choice",3,"value"],["formControlName","City",1,"form-select","js-choice",3,"value"],["type","text","formControlName","Address",1,"form-control",3,"value"],["formControlName","PhoneNumber","type","text",1,"form-control",3,"value"],["formControlName","BuildingNum","type","text",1,"form-control",3,"value"],["id","map",1,"col-12"],["src",ce`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3022.9663095343008!2d-74.00425878428698!3d40.74076684379132!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c259bf5c1654f3%3A0xc80f9cfce5383d5d!2sGoogle!5e0!3m2!1sen!2sin!4v1586000412513!5m2!1sen!2sin`,"height","500","aria-hidden","false","tabindex","0",1,"w-100","h-300px","grayscale","rounded",2,"border","0"],["type","file","accept","image/gif, image/jpeg, image/png","multiple","",1,"form-control",3,"change"],[1,"small","mb-0","mt-2",3,"ngClass"],[1,"text-end"],["type","button",1,"btn","btn-primary","next-btn","mb-0",3,"click"],["id","step-2","role","tabpanel","aria-labelledby","steppertrigger2",1,"content","fade"],["formControlName","Description","rows","3",1,"form-control",3,"value"],[1,"col-md-4"],["type","number","formControlName","FloorNumber",1,"form-control",3,"value"],["type","number","formControlName","TotalRooms",1,"form-control",3,"value"],["formControlName","ApartmentStatus",1,"form-select","js-choice",3,"value"],["value","false"],["value","true"],[1,"hstack","gap-2","flex-wrap","justify-content-between"],["type","button",1,"btn","btn-secondary","prev-btn","mb-0",3,"click"],["id","step-3","role","tabpanel","aria-labelledby","steppertrigger3",1,"content","fade"],["type","text","formControlName","Price",1,"form-control",3,"value"],["type","text","formControlName","Discount",1,"form-control",3,"value"],[1,"col-md-12"],["formControlName","CancellationPolicy","rows","3",1,"form-control",3,"value"],[1,"d-flex","flex-row","justify-content-between","col-12"],["type","button",1,"btn","btn-secondary","col-1","prev-btn","mb-0",3,"click"],["type","submit",1,"btn","btn-success","col-1","mb-0","text-nowrap",3,"disabled"],[1,"text-danger"],[4,"ngIf"]],template:function(o,l){if(o&1&&(t(0,"main")(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),i(6,"Edit Apartment Details"),e()()()()(),t(7,"section")(8,"div",1)(9,"div",5)(10,"div",6)(11,"div",7)(12,"div",8)(13,"button",9)(14,"span",10),i(15,"1"),e()(),t(16,"h6",11),i(17," Basic Information "),e()()(),p(18,"div",12),t(19,"div",13)(20,"div",8)(21,"button",14)(22,"span",10),i(23,"2"),e()(),t(24,"h6",11),i(25," Detailed Information "),e()()(),p(26,"div",12),t(27,"div",15)(28,"div",8)(29,"button",16)(30,"span",10),i(31,"3"),e()(),t(32,"h6",11),i(33,"Price & Policy"),e()()()(),t(34,"div",17)(35,"div",18)(36,"div",19)(37,"form",20),f("ngSubmit",function(){return l.onSubmit()}),t(38,"div",21)(39,"div",22)(40,"h4",23),i(41,"Basic Information"),e(),t(42,"div",24)(43,"div",25)(44,"h5",23),i(45,"Listing Name"),e()(),t(46,"div",26)(47,"div",18)(48,"div",19)(49,"label",27),i(50,"Apartment Name *"),e(),p(51,"input",28),c(52,Vt,2,1,"div",29),e()()()(),t(53,"div",24)(54,"div",25)(55,"h5",23),i(56,"Listing Location"),e()(),t(57,"div",26)(58,"div",30)(59,"div",31)(60,"label",27),i(61,"Country/Region *"),e(),t(62,"select",32)(63,"option",33),i(64,"Select Country"),e(),t(65,"option",34),i(66,"Egypt"),e(),t(67,"option",35),i(68,"India"),e(),t(69,"option",36),i(70,"USA"),e(),t(71,"option",37),i(72,"Japan"),e(),t(73,"option",38),i(74,"United Kingdom"),e()(),c(75,Wt,2,1,"div",29),e(),t(76,"div",31)(77,"label",27),i(78,"State *"),e(),t(79,"select",39)(80,"option",33),i(81,"Select State"),e(),t(82,"option"),i(83,"Aswan"),e(),t(84,"option"),i(85,"Alexandria"),e(),t(86,"option"),i(87,"Cairo"),e(),t(88,"option"),i(89,"Luxor"),e()(),c(90,Jt,2,1,"div",29),e(),t(91,"div",31)(92,"label",27),i(93,"City *"),e(),t(94,"select",40)(95,"option",33),i(96,"Select City"),e(),t(97,"option"),i(98,"Aswan City"),e(),t(99,"option"),i(100,"Gharb Soheil"),e(),t(101,"option"),i(102,"Abo Simble"),e(),t(103,"option"),i(104,"Edfu"),e(),t(105,"option"),i(106,"Komombo"),e(),t(107,"option"),i(108,"Nasr ElNouba"),e()(),c(109,Yt,2,1,"div",29),e(),t(110,"div",31)(111,"label",27),i(112," Address *"),e(),p(113,"input",41),c(114,Qt,2,1,"div",29),e(),t(115,"div",31)(116,"label",27),i(117,"Phone Number *"),e(),p(118,"input",42),c(119,ei,3,2,"div",29),e(),t(120,"div",31)(121,"label",27),i(122,"Building Number *"),e(),p(123,"input",43),c(124,ni,3,2,"div",29),e(),t(125,"div",44),p(126,"iframe",45),e()()()(),t(127,"div",24)(128,"div",25)(129,"h5",23),i(130,"Upload Images"),e()(),t(131,"div",26)(132,"div",30)(133,"div",19)(134,"label",27),i(135,"Upload thumbnail image *"),e(),t(136,"input",46),f("change",function(u){return l.SelectImages(u)}),e(),t(137,"p",47)(138,"b"),i(139,"Note:"),e(),i(140," Upload only 3 images. Only JPG, JPEG, and PNG are allowed. Suggested dimensions: 600px * 450px. "),e()()()()(),t(141,"div",48)(142,"button",49),f("click",function(){return l.next()}),i(143," Next "),e()()()(),t(144,"div",50)(145,"div",22)(146,"h4",23),i(147,"Detailed Information"),e(),t(148,"div",24)(149,"div",25)(150,"h5",23),i(151,"Overview"),e()(),t(152,"div",26)(153,"div",18)(154,"div",19)(155,"label",27),i(156,"Description *"),e(),p(157,"textarea",51),c(158,li,2,1,"div",29),e()()()(),t(159,"div",24)(160,"div",25)(161,"h5",23),i(162,"Size Of Your Listing"),e()(),t(163,"div",26)(164,"div",18)(165,"div",52)(166,"label",27),i(167,"Floor Number *"),e(),p(168,"input",53),c(169,mi,4,2,"div",29),e(),t(170,"div",52)(171,"label",27),i(172,"Total Room *"),e(),p(173,"input",54),c(174,pi,4,2,"div",29),e(),t(175,"div",52)(176,"label",27),i(177,"Apartment Status *"),e(),t(178,"select",55)(179,"option",33),i(180,"Select item"),e(),t(181,"option",56),i(182,"Empty"),e(),t(183,"option",57),i(184,"Fully Furnished"),e()(),c(185,ui,2,1,"div",29),e()()()(),t(186,"div",58)(187,"button",59),f("click",function(){return l.previous()}),i(188," Previous "),e(),t(189,"button",49),f("click",function(){return l.next()}),i(190," Next "),e()()()(),t(191,"div",60)(192,"div",22)(193,"h4",23),i(194,"Price & Policy"),e(),t(195,"div",24)(196,"div",25)(197,"h5",23),i(198,"Listing Price"),e()(),t(199,"div",26)(200,"div",18)(201,"div",31)(202,"label",27),i(203,"Base Price *"),e(),p(204,"input",61),c(205,hi,3,2,"div",29),e(),t(206,"div",31)(207,"label",27),i(208,"Discount *"),e(),p(209,"input",62),c(210,bi,2,1,"div",29),e(),t(211,"div",63)(212,"label",27),i(213,"Cancellation Policy *"),e(),p(214,"textarea",64),c(215,xi,2,1,"div",29),e()()()(),t(216,"div",65)(217,"button",66),f("click",function(){return l.previous()}),i(218," Previous "),e(),t(219,"button",67),i(220," Edit Listing "),e()()()()()()()()()()()()),o&2){let g,u,A,y,D,M,R,O,L,q,j,U,G,V;a(37),s("formGroup",l.EditApartmentForm),a(14),s("value",l.apartment.Name),a(),s("ngIf",((g=l.EditApartmentForm.get("Name"))==null?null:g.touched)&&((g=l.EditApartmentForm.get("Name"))==null?null:g.invalid)),a(10),s("value",l.apartment.Country),a(13),s("ngIf",((u=l.EditApartmentForm.get("Country"))==null?null:u.touched)&&((u=l.EditApartmentForm.get("Country"))==null?null:u.invalid)),a(4),s("value",l.apartment.State),a(11),s("ngIf",((A=l.EditApartmentForm.get("State"))==null?null:A.touched)&&((A=l.EditApartmentForm.get("State"))==null?null:A.invalid)),a(4),s("value",l.apartment.City),a(15),s("ngIf",((y=l.EditApartmentForm.get("City"))==null?null:y.touched)&&((y=l.EditApartmentForm.get("City"))==null?null:y.invalid)),a(4),s("value",l.apartment.Address),a(),s("ngIf",((D=l.EditApartmentForm.get("Address"))==null?null:D.touched)&&((D=l.EditApartmentForm.get("Address"))==null?null:D.invalid)),a(4),s("value",l.apartment.PhoneNumber),a(),s("ngIf",((M=l.EditApartmentForm.get("PhoneNumber"))==null?null:M.touched)&&((M=l.EditApartmentForm.get("PhoneNumber"))==null?null:M.invalid)),a(4),s("value",l.apartment.BuildingNum),a(),s("ngIf",((R=l.EditApartmentForm.get("BuildingNum"))==null?null:R.touched)&&((R=l.EditApartmentForm.get("BuildingNum"))==null?null:R.invalid)),a(13),s("ngClass",W(31,Ut,l.validImages==!1,l.validImages==!0)),a(20),s("value",l.apartment.Description),a(),s("ngIf",((O=l.EditApartmentForm.get("Description"))==null?null:O.touched)&&((O=l.EditApartmentForm.get("Description"))==null?null:O.invalid)),a(10),s("value",l.apartment.FloorNumber),a(),s("ngIf",((L=l.EditApartmentForm.get("FloorNumber"))==null?null:L.touched)&&((L=l.EditApartmentForm.get("FloorNumber"))==null?null:L.invalid)),a(4),s("value",l.apartment.TotalRooms),a(),s("ngIf",((q=l.EditApartmentForm.get("TotalRooms"))==null?null:q.touched)&&((q=l.EditApartmentForm.get("TotalRooms"))==null?null:q.invalid)),a(4),s("value",l.apartment.ApartmentStatus),a(7),s("ngIf",((j=l.EditApartmentForm.get("ApartmentStatus"))==null?null:j.touched)&&((j=l.EditApartmentForm.get("ApartmentStatus"))==null?null:j.invalid)),a(19),s("value",l.apartment.Price),a(),s("ngIf",((U=l.EditApartmentForm.get("Price"))==null?null:U.touched)&&((U=l.EditApartmentForm.get("Price"))==null?null:U.invalid)),a(4),s("value",l.apartment.Discount),a(),s("ngIf",((G=l.EditApartmentForm.get("Discount"))==null?null:G.touched)&&((G=l.EditApartmentForm.get("Discount"))==null?null:G.invalid)),a(4),s("value",l.apartment.CancellationPolicy),a(),s("ngIf",((V=l.EditApartmentForm.get("CancellationPolicy"))==null?null:V.touched)&&((V=l.EditApartmentForm.get("CancellationPolicy"))==null?null:V.invalid)),a(4),s("disabled",l.EditApartmentForm.invalid)}},dependencies:[J,ve,ee,re,le,H,fe,ne,Q,X,te,ie]});let r=m;return r})();function Ei(r,m){if(r&1){let d=me();t(0,"div")(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7),p(7,"img",8),e(),t(8,"div",9),p(9,"img",8),e(),t(10,"div",9),p(11,"img",8),e()(),t(12,"button",10),p(13,"i",11),e(),t(14,"button",12),p(15,"i",13),e()()(),t(16,"div",14)(17,"div",15)(18,"h5",16)(19,"a",17),i(20),e()(),t(21,"small"),p(22,"i",18),i(23),e(),t(24,"div",19)(25,"ul",20)(26,"li",21),p(27,"i",22),e(),t(28,"li",21),p(29,"i",22),e(),t(30,"li",21),p(31,"i",22),e(),t(32,"li",21),p(33,"i",23),e(),t(34,"li",21),p(35,"i",24),e()()(),t(36,"div",25)(37,"div",26)(38,"h5",27),i(39),e(),t(40,"span",28),i(41,"/week"),e()(),t(42,"div",29)(43,"button",30),f("click",function(){let o=k(d).$implicit,l=h();return I(l.Details(o))}),i(44," Details "),e(),p(45,"br"),t(46,"button",31),f("click",function(){let o=k(d).$implicit,l=h();return I(l.Edit(o.ID))}),i(47," Edit "),e(),p(48,"br"),t(49,"button",32),f("click",function(){let o=k(d).$implicit,l=h();return I(l.Delete(o.ID))}),i(50," Delete "),e()()()()()()()()}if(r&2){let d=m.$implicit,n=m.index,o=h();a(4),ue("id","carouselExample",n,""),a(3),P("src",o.urlImg+d.Image1,x),a(2),P("src",o.urlImg+d.Image2,x),a(2),P("src",o.urlImg+d.Image3,x),a(),F("data-bs-target","#carouselExample"+n),a(2),F("data-bs-target","#carouselExample"+n),a(6),E(d.Name),a(3),_("",d.Address," "),a(16),_("$",d.Price,"")}}var Ze=(()=>{let m=class m{constructor(n,o,l){this.apartmentservice=n,this.router=o,this.route=l,this.bookings={},this.reviews={},this.totalProfits=0,this.urlImg="http://localhost:5227/",this.list=[]}ngOnInit(){this.GetallMyApartments(),this.loadApartments()}loadApartments(){this.apartmentservice.GetMyApartments().subscribe(n=>{this.apartments=n,this.apartmentservice.calculateProfits().subscribe({next:o=>{this.totalProfits=o},error(){console.log("Error Can\u2019t Calculate the Profits")}}),this.apartments.forEach(o=>{this.loadBookings(o.ID),this.loadReviews(o.ID)})})}GetallMyApartments(){var n;return n=this.apartmentservice.GetMyApartments().subscribe({next:o=>{console.log("MyApartmentList",o),this.list=o},error:o=>console.error("Error:",o)}),n}Delete(n){this.apartmentservice.deleteApartment(n).subscribe({next:o=>{console.log(o)},error:o=>console.error("error:",o)})}Edit(n){this.apartmentservice.getApartmentByID(n).subscribe({next:o=>{console.log("Edit data:",o),this.router.navigate([`apartment/owner/edit-apartment/${n}`])},error:o=>{console.log(o)}})}Details(n){this.apartmentservice.getApartmentByID(n.ID).subscribe({next:o=>{console.log("Details data:",o),this.router.navigate([`apartment/owner/apartment-details-Owner/${n.ID}`])},error:o=>{console.log(o)}})}loadBookings(n){this.apartmentservice.getPendingBookings(n).subscribe(o=>{this.bookings[n]=o})}loadReviews(n){this.apartmentservice.getReviews(n).subscribe(o=>{this.reviews[n]=o})}acceptBooking(n){this.apartmentservice.acceptBooking(n).subscribe(()=>{this.loadApartments()})}rejectBooking(n){this.apartmentservice.rejectBooking(n).subscribe(()=>{this.loadApartments()})}};m.\u0275fac=function(o){return new(o||m)(b(C),b(de),b(Y))},m.\u0275cmp=S({type:m,selectors:[["app-my-apartments"]],decls:3,vars:2,consts:[[1,"h1","text-center","p-2"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","shadow","p-2"],[1,"cards","row","g-0"],[1,"col-md-5","position-relative"],["data-bs-ride","carousel",1,"carousel","slide",3,"id"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","",1,"card-img",3,"src"],[1,"carousel-item"],["type","button","data-bs-slide","prev",1,"carousel-control-prev","text-white","bg-black","rounded-circle"],[1,"fas","fa-chevron-left"],["type","button","data-bs-slide","next",1,"carousel-control-next","text-white","bg-black","rounded-circle"],[1,"fas","fa-chevron-right"],[1,"cards","col-md-7"],[1,"card-body","py-md-2","d-flex","flex-column","h-100","position-relative"],[1,"card-title","mb-1"],["href","Apartment-detail.html"],[1,"bi","bi-geo-alt","me-2","mt-3"],[1,"d-flex","justify-content-between","align-items-center","m-2"],[1,"list-inline","mb-0"],[1,"list-inline-item","me-0","small"],[1,"fa-solid","fa-star","text-warning"],[1,"fa-solid","fa-star-half-alt","text-warning"],[1,"fa-solid","fa-star","text-secondary"],[1,"d-sm-flex","justify-content-sm-between","align-items-center","mt-3","mt-md-auto"],[1,"d-flex","align-items-center"],[1,"fw-bold","mb-0","me-1"],[1,"mb-0","me-2"],[1,"mt-3","mt-sm-0","col-3","justify-content-between"],[1,"btn","btn-sm","btn-dark","mb-0","w-100","mb-2",3,"click"],[1,"btn","btn-sm","btn-warning","mb-0","w-100","mb-2",3,"click"],[1,"btn","btn-sm","btn-danger","mb-0","w-100","mb-2",3,"click"]],template:function(o,l){o&1&&(t(0,"div",0),i(1," My Apartment List "),e(),c(2,Ei,51,10,"div",1)),o&2&&(a(2),s("ngForOf",l.list)("ngForTrackBy",l.trackByFn))},dependencies:[K],styles:["#carouselExample[_ngcontent-%COMP%]   .carousel-control-next[_ngcontent-%COMP%], #carouselExample[_ngcontent-%COMP%]   .carousel-control-prev[_ngcontent-%COMP%], .carousel-control-next[_ngcontent-%COMP%], .carousel-control-prev[_ngcontent-%COMP%]{width:40px;height:40px;top:100px}.avatar[_ngcontent-%COMP%]{width:30px;height:30px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.card-img-overlay[_ngcontent-%COMP%]{bottom:50px}.card-img-overlay[_ngcontent-%COMP%]{top:inherit}.bg-dark[_ngcontent-%COMP%]{opacity:.7}"]});let r=m;return r})();var Si=(r,m)=>({"bg-success":r,"bg-danger":m});function Ai(r,m){if(r&1&&(t(0,"div",47)(1,"div",48),p(2,"img",49),t(3,"div",50)(4,"h5",51),i(5),e(),t(6,"h6",52),i(7),e(),t(8,"p",53),i(9),e()()()()),r&2){let d=m.$implicit;a(2),P("alt",d.FullName),s("src",d.Profilimg,x),a(3),E(d.FullName),a(2),_("Review No: ",d.ReviewNo,""),a(2),E(d.ReviewText)}}var et=(()=>{let m=class m{constructor(n,o,l,g,u){this._api=n,this.route=o,this.Router=l,this.fB=g,this.account=u,this.urlImg="http://localhost:5227/",this.reviews=[],this.BookingForm=this.fB.group({PayType:[,v.required],Checkin:["",v.required],Checkout:["",v.required]})}ngOnInit(){let n=Number(this.route.snapshot.paramMap.get("id"));var o=this.getApartmentDetails(n);console.log(n),console.log(o),this.getReviews()}getApartmentDetails(n){var o;this._api.getApartmentByID(n).subscribe(l=>{this.Apartment=l,o=l,console.log(l)})}modal(n){this.addBooking(n)}inLoad(){let n=document.getElementById("bookingModal"),o=document.querySelector(".close-button"),l=document.getElementById("bookingForm");document.querySelectorAll(".bookButton").forEach(g=>{g.addEventListener("click",function(){this.getAttribute("data-index")!==null&&(n.style.display="block")})}),o.addEventListener("click",()=>{n.style.display="none"}),window.addEventListener("click",g=>{g.target===n&&(n.style.display="none")})}addBooking(n){this.BookingForm.valid?(this.BookingForm.addControl("ApartmentID",new Z(n.ID)),this.BookingForm.addControl("Price",new Z(n.Price)),this.BookingForm.addControl("Profile",new Z(this.profile)),console.log(this.BookingForm.value),this.BookingApartment={ApartmentID:this.BookingForm.controls.ApartmentID?.value,Checkin:this.BookingForm.controls.Checkin?.value,Checkout:this.BookingForm.controls.Checkout?.value,PayType:Number(this.BookingForm.controls.PayType?.value),Price:this.BookingForm.controls.Price?.value,userID:"",Status:"pending",profile:this.BookingForm.controls.Profile?.value,ReviewNo:null,ReviewText:null},console.log(this.BookingApartment),this._api.addBooking(this.BookingApartment).subscribe({next:o=>{console.log("Booking Added Successfully",o),this.BookingForm.reset(),this.closeModal()},error:o=>{console.error("Error",o)}})):this.BookingForm.markAllAsTouched()}details(n){this.Router.navigate(["apartment/apartment-details",n.ID])}closeModal(){let n=document.getElementById("bookingModal");n.setAttribute("aria-hidden","true"),n.setAttribute("aria-tabindex","-1")}getReviews(){this._api.getAllBookings().subscribe({next:n=>{this.reviews=n,console.log(n)},error:n=>{console.error("Error",n)}})}};m.\u0275fac=function(o){return new(o||m)(b(C),b(Y),b(de),b(ae),b(se))},m.\u0275cmp=S({type:m,selectors:[["app-apartment-details"]],decls:105,vars:25,consts:[[1,"section"],[1,"container"],[1,"row","justify-content-between"],[1,"col-lg-7"],["id","apartmentCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","Image 1",1,"d-block","w-100","img-fluid",3,"src"],[1,"carousel-item"],["alt","Image 2",1,"d-block","w-100","img-fluid",3,"src"],["alt","Image 3",1,"d-block","w-100","img-fluid",3,"src"],["type","button","data-bs-target","#apartmentCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#apartmentCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"col-md-5","border-1","border-2","border-dark","p-5"],[1,"text-primary","w-100"],[1,"mt-3"],[1,"text-danger"],[1,"badge",3,"ngClass"],[1,"mt-3","mt-sm-0","w-50"],["type","button","data-bs-toggle","modal","data-bs-target","#bookingModal",1,"bookButton","btn","btn-sm","btn-dark","mb-0","w-50","mt-1",3,"click"],["id","bookingModal","tabindex","-1","role","dialog","aria-labelledby","bookingModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","bookingModalLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["id","bookingForm",3,"ngSubmit","formGroup"],[1,"form-group"],["for","checkin"],["type","date","formControlName","Checkin","id","checkin","required","",1,"form-control"],["for","checkout"],["type","date","formControlName","Checkout","id","checkout","required","",1,"form-control"],["for","payType"],["formControlName","PayType",1,"form-select","js-choice"],["value","","disabled",""],["value","1"],["value","2"],["value","3"],["type","submit",1,"btn","btn-primary","mt-md-3","float-end",3,"disabled"],[1,"container","mt-4"],[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","mb-4"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],[1,"card-text"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),p(7,"img",7),e(),t(8,"div",8),p(9,"img",9),e(),t(10,"div",8),p(11,"img",10),e()(),t(12,"button",11),p(13,"span",12),t(14,"span",13),i(15,"Previous"),e()(),t(16,"button",14),p(17,"span",15),t(18,"span",13),i(19,"Next"),e()()()(),t(20,"div",16)(21,"h1",17),i(22),e(),p(23,"br"),t(24,"p",18)(25,"strong"),i(26,"Description:"),e(),i(27),e(),t(28,"p")(29,"strong"),i(30,"Address:"),e(),i(31),e(),t(32,"p")(33,"strong"),i(34,"Building Number:"),e(),i(35),e(),t(36,"p")(37,"strong"),i(38,"Floor Number:"),e(),i(39),e(),t(40,"p")(41,"strong"),i(42,"Total Rooms:"),e(),i(43),e(),t(44,"p")(45,"strong"),i(46,"Phone Number:"),e(),i(47),e(),t(48,"p")(49,"strong"),i(50,"Price:"),e(),i(51),t(52,"span",19),i(53),e()(),t(54,"p")(55,"strong"),i(56,"Cancellation Policy:"),e(),i(57),e(),t(58,"p")(59,"strong"),i(60,"Furnished:"),e(),t(61,"span",20),i(62),e()(),t(63,"div",21)(64,"button",22),f("click",function(){return l.modal(l.Apartment)}),i(65," Book "),e()()()()()(),p(66,"br"),t(67,"div",23)(68,"div",24)(69,"div",25)(70,"div",26)(71,"h5",27),i(72,"Book Apartment"),e(),t(73,"button",28)(74,"span",29),i(75,"\xD7"),e()()(),t(76,"div",30)(77,"form",31),f("ngSubmit",function(){return l.addBooking(l.Apartment)}),t(78,"div",32)(79,"label",33),i(80,"Check-in Date:"),e(),p(81,"input",34),e(),t(82,"div",32)(83,"label",35),i(84,"Check-out Date:"),e(),p(85,"input",36),e(),t(86,"div",32)(87,"label",37),i(88,"Payment Type:"),e(),t(89,"select",38)(90,"option",39),i(91,"Select Payment Method"),e(),t(92,"option",40),i(93,"Cash"),e(),t(94,"option",41),i(95,"PayPal"),e(),t(96,"option",42),i(97,"Credit Card"),e()()(),t(98,"button",43),i(99,"Submit Booking"),e()()()()()(),t(100,"div",44)(101,"h2"),i(102,"Apartment Reviews"),e(),t(103,"div",45),c(104,Ai,10,5,"div",46),e()()),o&2&&(a(7),s("src",l.urlImg+l.Apartment.Image1Path,x),a(2),s("src",l.urlImg+l.Apartment.Image2Path,x),a(2),s("src",l.urlImg+l.Apartment.Image3Path,x),a(11),E(l.Apartment.Name),a(5),_(" ",l.Apartment.Description,""),a(4),ge(" ",l.Apartment.Address,", ",l.Apartment.City,", ",l.Apartment.State,", ",l.Apartment.Country,""),a(4),_(" ",l.Apartment.BuildingNum,""),a(4),_(" ",l.Apartment.FloorNumber,""),a(4),_(" ",l.Apartment.TotalRooms,""),a(4),_(" +20",l.Apartment.PhoneNumber,""),a(4),_(" $",l.Apartment.Price," "),a(2),_("(-",l.Apartment.Discount,"% off)"),a(4),_(" ",l.Apartment.CancellationPolicy,""),a(4),s("ngClass",W(22,Si,l.Apartment.ApartmentStatus,!l.Apartment.ApartmentStatus)),a(),_(" ",l.Apartment.ApartmentStatus?"Fully Furnished":"Empty"," "),a(2),F("data-index",l.Apartment.ID),a(13),s("formGroup",l.BookingForm),a(21),s("disabled",l.BookingForm.invalid),a(6),s("ngForOf",l.reviews))},dependencies:[J,K,ee,re,le,H,ne,Q,X,be,te,ie]});let r=m;return r})();var yi=(r,m)=>({"bg-success text-white":r,"bg-danger text-white":m});function Ci(r,m){if(r&1){let d=me();t(0,"div",26)(1,"div",23)(2,"small",37),i(3,"Booked by:"),e(),t(4,"div",38)(5,"div",39),p(6,"img",40),e(),t(7,"div",41)(8,"h6",42),i(9),e()()()(),t(10,"div",23)(11,"small",37),i(12,"Check-in:"),e(),t(13,"h6",43),i(14),T(15,"date"),e()(),t(16,"div",23)(17,"small",37),i(18,"Check-out:"),e(),t(19,"h6",43),i(20),T(21,"date"),e()(),t(22,"div",23)(23,"small",37),i(24,"Guests:"),e(),t(25,"h6",43),i(26,"05"),e()(),t(27,"div",23)(28,"small",37),i(29,"Amount:"),e(),t(30,"h6",44),i(31),e()(),t(32,"div",25)(33,"div",45)(34,"a",46),f("click",function(){k(d);let o=h();return I(o.confirmbook(o.id))}),i(35,"Aceept"),e()(),t(36,"div",45)(37,"a",47),f("click",function(){k(d);let o=h();return I(o.cancelbook(o.id))}),i(38,"Reject"),e()()()()}if(r&2){let d=m.$implicit,n=h();a(6),s("src",n.urlImg+d.profile.ProfilimgPath?n.urlImg+d.profile.ProfilimgPath:n.urlImg+n.profile.Profilimg,x),a(3),E(d.profile.FullName),a(5),E(z(15,5,d.Checkin)),a(6),E(z(21,7,d.Checkout)),a(11),E(d.Price)}}var tt=(()=>{let m=class m{constructor(n,o,l){this._api=n,this.route=o,this.account=l,this.urlImg="http://localhost:5227/",this.ApartmentBookings=[],this.pendingRequests=[],this.AllBookingList=[],this.id=0}ngOnInit(){this.id=Number(this.route.snapshot.paramMap.get("id")),console.log(this.getApartmentDetails(this.id)),this.GetApartmentsBookings(this.id),this.get(),this.getBooking()}getBooking(){this._api.getAllBookings().subscribe({next:n=>{this.AllBookingList=n,console.log(n)},error:n=>{console.error("Error fetching user data",n)}})}getApartmentDetails(n){var o;this._api.getApartmentByID(n).subscribe(l=>{console.log(l),this.Apartment=l,o=l})}confirmbook(n){this._api.acceptBooking(n).subscribe({next:()=>{this.GetApartmentsBookings(this.id),alert("Booking confirmed successfully")},error:o=>{console.error("Error confirming booking",o)}})}cancelbook(n){this._api.rejectBooking(n).subscribe({next:()=>{this.GetApartmentsBookings(this.id),alert("Booking canceled successfully")},error:o=>{console.error("Error canceling booking",o)}})}GetApartmentsBookings(n){this._api.getPendingBookings(n).subscribe(o=>{console.log("data:",o),this.ApartmentBookings=o,console.log("ApartmentBookings",this.ApartmentBookings)})}get(){this.account.getUserByID().subscribe({next:n=>{this.profile=n,console.log(this.profile)},error:n=>{console.error("Error fetching user data",n)}})}};m.\u0275fac=function(o){return new(o||m)(b(C),b(Y),b(se))},m.\u0275cmp=S({type:m,selectors:[["app-apartment-details"]],decls:110,vars:21,consts:[[1,"section"],[1,"container"],[1,"row","justify-content-between"],[1,"col-lg-7"],["id","apartmentCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","Image 1",1,"d-block","w-100","img-fluid",3,"src"],[1,"carousel-item"],["alt","Image 2",1,"d-block","w-100","img-fluid",3,"src"],["alt","Image 3",1,"d-block","w-100","img-fluid",3,"src"],["type","button","data-bs-target","#apartmentCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#apartmentCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"col-md-5","border-1","border-2","border-dark","p-5"],[1,"text-primary","w-100"],[1,"mt-3"],[1,"text-danger"],[1,"badge",3,"ngClass"],[1,"bg-light","rounded","p-3","d-none","d-lg-block"],[1,"row","row-cols-7","g-4"],[1,"col"],[1,"mb-0"],[1,"col-3","d-flex","justify-content-center"],[1,"row","row-cols-xl-7","align-items-lg-center","border-bottom","g-4","px-2","py-4"],[1,"card-footer","pt-0"],[1,"d-sm-flex","justify-content-sm-between","align-items-sm-center"],[1,"mb-sm-0","text-center","text-sm-start"],["aria-label","navigation",1,"mb-sm-0","d-flex","justify-content-center"],[1,"pagination","pagination-sm","pagination-primary-soft","mb-0"],[1,"page-item","disabled"],["href","#","tabindex","-1",1,"page-link"],[1,"page-item"],["href","#",1,"page-link"],[1,"page-item","active"],[1,"d-block","d-lg-none"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-xs","flex-shrink-0"],["alt","avatar",1,"avatar-img","rounded-circle",3,"src"],[1,"ms-2"],[1,"mb-0","fw-light"],[1,"mb-0","fw-normal"],[1,"text-success","mb-0"],[1,"w-30"],[1,"btn","btn-sm","btn-success","mb-0",3,"click"],[1,"btn","btn-sm","btn-danger","mb-0",3,"click"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),p(7,"img",7),e(),t(8,"div",8),p(9,"img",9),e(),t(10,"div",8),p(11,"img",10),e()(),t(12,"button",11),p(13,"span",12),t(14,"span",13),i(15,"Previous"),e()(),t(16,"button",14),p(17,"span",15),t(18,"span",13),i(19,"Next"),e()()()(),t(20,"div",16)(21,"h1",17),i(22),e(),p(23,"br"),t(24,"p",18)(25,"strong"),i(26,"Description:"),e(),i(27),e(),t(28,"p")(29,"strong"),i(30,"Address:"),e(),i(31),e(),t(32,"p")(33,"strong"),i(34,"Building Number:"),e(),i(35),e(),t(36,"p")(37,"strong"),i(38,"Floor Number:"),e(),i(39),e(),t(40,"p")(41,"strong"),i(42,"Total Rooms:"),e(),i(43),e(),t(44,"p")(45,"strong"),i(46,"Phone Number:"),e(),i(47),e(),t(48,"p")(49,"strong"),i(50,"Price:"),e(),i(51),t(52,"span",19),i(53),e()(),t(54,"p")(55,"strong"),i(56,"Cancellation Policy:"),e(),i(57),e(),t(58,"p")(59,"strong"),i(60,"Furnished:"),e(),t(61,"span",20),i(62),e()()()()()(),p(63,"br"),t(64,"div",21)(65,"div",22)(66,"div",23)(67,"h6",24),i(68,"Booked by"),e()(),t(69,"div",23)(70,"h6",24),i(71,"Check-in"),e()(),t(72,"div",23)(73,"h6",24),i(74,"Check-out"),e()(),t(75,"div",23)(76,"h6",24),i(77,"Guest"),e()(),t(78,"div",23)(79,"h6",24),i(80,"Amount"),e()(),t(81,"div",25)(82,"h6",24),i(83,"Action"),e()()()(),Pe(84,Ci,39,9,"div",26,Fe),t(86,"div",27)(87,"div",28)(88,"p",29),i(89,"Showing 1 to 8 of 20 entries"),e(),t(90,"nav",30)(91,"ul",31)(92,"li",32)(93,"a",33),i(94,"Prev"),e()(),t(95,"li",34)(96,"a",35),i(97,"1"),e()(),t(98,"li",36)(99,"a",35),i(100,"2"),e()(),t(101,"li",32)(102,"a",35),i(103,".."),e()(),t(104,"li",34)(105,"a",35),i(106,"15"),e()(),t(107,"li",34)(108,"a",35),i(109,"Next"),e()()()()()()),o&2&&(a(7),s("src",l.urlImg+l.Apartment.Image1Path,x),a(2),s("src",l.urlImg+l.Apartment.Image2Path,x),a(2),s("src",l.urlImg+l.Apartment.Image3Path,x),a(11),E(l.Apartment.Name),a(5),_(" ",l.Apartment.Description,""),a(4),ge(" ",l.Apartment.Address,", ",l.Apartment.City,", ",l.Apartment.State,", ",l.Apartment.Country,""),a(4),_(" ",l.Apartment.BuildingNum,""),a(4),_(" ",l.Apartment.FloorNumber,""),a(4),_(" ",l.Apartment.TotalRooms,""),a(4),_(" +20",l.Apartment.PhoneNumber,""),a(4),_(" $",l.Apartment.Price," "),a(2),_("(-",l.Apartment.Discount,"% off)"),a(4),_(" ",l.Apartment.CancellationPolicy,""),a(4),s("ngClass",W(18,yi,l.Apartment.ApartmentStatus,!l.Apartment.ApartmentStatus)),a(),_(" ",l.Apartment.ApartmentStatus?"Fully Furnished":"Empty"," "),a(22),we(l.ApartmentBookings))},dependencies:[J,he]});let r=m;return r})();var it=(()=>{let m=class m{};m.\u0275fac=function(o){return new(o||m)},m.\u0275cmp=S({type:m,selectors:[["app-apartmentownerhome"]],decls:42,vars:0,consts:[[1,"container","my-5"],[1,"text-center","mb-5",2,"font-weight","bold","color","#333"],[1,"row"],[1,"col-md-6","mb-4"],[1,"card","card-stats","text-center","services-card"],[1,"card-body"],[1,"stat-icon","mb-3"],[1,"fas","fa-concierge-bell"],["id","serviceCount",1,"stat-value"],[1,"card","card-stats","text-center","bookings-card"],[1,"fas","fa-calendar-check"],["id","bookingCount",1,"stat-value"],[1,"card","card-stats","text-center","confirmed-card"],[1,"fas","fa-check-circle"],["id","confirmedCount",1,"stat-value"],[1,"card","card-stats","text-center","earnings-card"],[1,"fas","fa-dollar-sign"],["id","totalEarnings",1,"stat-value"]],template:function(o,l){o&1&&(t(0,"h1"),i(1,"Welcome Back"),e(),t(2,"div",0)(3,"h2",1),i(4,"User Progress"),e(),t(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),p(10,"i",7),e(),t(11,"h5"),i(12,"Services"),e(),t(13,"p",8),i(14,"0"),e()()()(),t(15,"div",3)(16,"div",9)(17,"div",5)(18,"div",6),p(19,"i",10),e(),t(20,"h5"),i(21,"Bookings"),e(),t(22,"p",11),i(23,"0"),e()()()(),t(24,"div",3)(25,"div",12)(26,"div",5)(27,"div",6),p(28,"i",13),e(),t(29,"h5"),i(30,"Confirmed Processes"),e(),t(31,"p",14),i(32,"0"),e()()()(),t(33,"div",3)(34,"div",15)(35,"div",5)(36,"div",6),p(37,"i",16),e(),t(38,"h5"),i(39,"Total Earnings"),e(),t(40,"p",17),i(41,"$0.00"),e()()()()()())},styles:[".card-stats[_ngcontent-%COMP%]{padding:25px;border-radius:15px;box-shadow:0 10px 20px #0000001a;color:#fff;transition:transform .3s ease,box-shadow .3s ease}.card-stats[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 15px 30px #0003}.services-card[_ngcontent-%COMP%]{background:#6f9ee4}.bookings-card[_ngcontent-%COMP%]{background:#f7a278}.confirmed-card[_ngcontent-%COMP%]{background:#78c5a3}.earnings-card[_ngcontent-%COMP%]{background:#f7b267}.stat-icon[_ngcontent-%COMP%]{font-size:3rem}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-top:10px}"]});let r=m;return r})();function ki(r,m){r&1&&i(0," Cash ")}function Ii(r,m){r&1&&i(0," Paypal ")}function Fi(r,m){r&1&&i(0," Credit Card ")}function Pi(r,m){if(r&1&&(t(0,"tr"),p(1,"td"),t(2,"td"),i(3),T(4,"date"),e(),t(5,"td"),i(6),T(7,"date"),e(),t(8,"td"),i(9),T(10,"currency"),e(),t(11,"td"),c(12,ki,1,0)(13,Ii,1,0)(14,Fi,1,0),e()()),r&2){let d=m.$implicit;a(3),E(z(4,4,d.Checkin)),a(3),E(z(7,6,d.Checkout)),a(3),E(z(10,8,d.Price)),a(3),Ie(d.PayType==1?12:d.PayType==2?13:d.PayType==3?14:-1)}}var nt=(()=>{let m=class m{constructor(n){this.ApartmentService=n,this.acceptedBookings=[]}ngOnInit(){this.getBookings(),this.calculateTotalPrice()}getBookings(){return this.ApartmentService.getAcceptedBookings().subscribe(n=>{this.acceptedBookings=n,console.log("Bookings:",this.acceptedBookings)})}calculateTotalPrice(){return this.ApartmentService.calculateProfits().subscribe({next:n=>{this.TotalProfit=n,console.log("Total Profit:",this.TotalProfit)},error:()=>{console.error("Error calculating total profit")}})}};m.\u0275fac=function(o){return new(o||m)(b(C))},m.\u0275cmp=S({type:m,selectors:[["app-my-bookings"]],decls:22,vars:4,consts:[[1,"container"],[4,"ngFor","ngForOf"],[1,"total-price"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"h1"),i(2,"Accepted Bookings"),e(),t(3,"table")(4,"thead")(5,"tr")(6,"th"),i(7,"Guest Name"),e(),t(8,"th"),i(9,"Check-in Date"),e(),t(10,"th"),i(11,"Check-out Date"),e(),t(12,"th"),i(13,"Price"),e(),t(14,"th"),i(15,"Payment Type"),e()()(),t(16,"tbody"),c(17,Pi,15,10,"tr",1),t(18,"div",2)(19,"strong"),i(20),T(21,"currency"),e()()()()()),o&2&&(a(17),s("ngForOf",l.acceptedBookings),a(3),_("Total Profit: ",z(21,2,l.TotalProfit),""))},dependencies:[K,Te,he],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 2px 5px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;color:#333}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.profile-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:10px}.total-price[_ngcontent-%COMP%]{margin-top:20px;font-size:1.5em;font-weight:700;text-align:right}"]});let r=m;return r})();var wi=[{path:"apartment-list",component:Ke},{path:"apartment-details/:id",component:et},{component:Ge,path:"owner",children:[{path:"home",component:it},{path:"add-apartment",component:He},{path:"edit-apartment/:id",component:Xe},{path:"My-apartments",component:Ze},{path:"apartment-details-Owner/:id",component:tt},{path:"my-bookings",component:nt}],canActivate:[Ue]}],an=(()=>{let m=class m{};m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=ke({type:m}),m.\u0275inj=ye({imports:[We,De,Re.forChild(wi),je,qe]});let r=m;return r})();export{an as ApartmentOwnerModule};
