import{a as S,c as Te}from"./chunk-J5WWUKVF.js";import{f as ke,h as Oe}from"./chunk-N4OE3BEA.js";import{$ as ie,$a as U,B as s,C as g,E as v,F as pe,Fa as j,G as d,H as Q,Ha as Se,Ia as se,Ka as ye,Ma as w,N as i,Na as b,O as e,Oa as F,P as p,Pa as Y,Q as X,R as Z,S as N,Sa as Ie,T as u,Ta as V,U as x,Ua as ce,W as ee,Wa as B,X as te,Y as r,Z as _,Za as q,_ as h,_a as z,a as E,aa as be,ab as G,b as M,bb as Ee,ca as ne,cb as W,da as re,db as Me,ea as oe,eb as De,ga as J,hb as we,j as ue,ja as O,k as he,ka as ge,la as ae,ma as le,n as C,na as A,o as ve,pb as $,qa as P,qb as Fe,ra as I,s as T,sa as xe,t as L,ta as Ce,ua as _e,wa as Pe,z as y,za as R}from"./chunk-SAXKXHZH.js";var Ge=a=>["/driver/edit-Driver",a],We=a=>["/driver/See-Deitals",a];function $e(a,l){if(a&1){let c=N();i(0,"button",11),u("click",function(){T(c);let n=x().$implicit,o=x();return L(o.deleteCar(n.ID))}),r(1," Delete "),e()}}function He(a,l){if(a&1&&(i(0,"tr")(1,"td"),r(2),e(),i(3,"td"),r(4),e(),i(5,"td"),r(6),e(),i(7,"td"),p(8,"img",6),e(),i(9,"td")(10,"div",7)(11,"button",8),r(12," Edit "),e(),i(13,"button",9),r(14," See Details "),e(),v(15,$e,2,0,"button",10),e()()()),a&2){let c=l.$implicit;s(2),_(c.CarModel),s(2),_(c.TypeCar),s(2),_(c.ModelYear),s(2),ee("alt","",c.CarModel," - Image 1"),d("src","http://localhost:5227/"+c.Image1,y),s(3),d("routerLink",J(9,Ge,c.ID)),s(2),d("routerLink",J(11,We,c.ID)),s(2),d("ngIf",c.ID)}}var Le=(()=>{let l=class l{constructor(t,n){this.carser=t,this.cdRef=n,this.Cars=[]}ngOnInit(){this.fetchData()}fetchData(){this.carser.getAllCars().subscribe({next:t=>{console.log("API response:",t),Array.isArray(t)?this.Cars=t.map(n=>M(E({},n),{Image1:n.Image1?n.Image1.replace(/\\/g,"/"):"",Image2:n.Image2?n.Image2.replace(/\\/g,"/"):"",ImageLinces:n.ImageLinces?n.ImageLinces.replace(/\\/g,"/"):"",ServiceProvider:M(E({},n.ServiceProvider),{Attachment:n.ServiceProvider?.Attachment?n.ServiceProvider.Attachment.replace(/\\/g,"/"):null})})):(console.error("API response is not an array"),this.Cars=[])},error:t=>{console.error("Error fetching data:",t)}})}deleteCar(t){if(!t){console.error("Delete failed: ID is undefined or null.");return}confirm("Are you sure you want to delete this car?")&&this.carser.delete(t).subscribe({next:()=>{console.log("Car deleted successfully!"),this.Cars=this.Cars.filter(n=>n.ID!==t),this.cdRef.detectChanges()},error:n=>{console.error("Error deleting car:",n)}})}};l.\u0275fac=function(n){return new(n||l)(g(S),g(A))},l.\u0275cmp=C({type:l,selectors:[["app-list-driver"]],decls:18,vars:1,consts:[[1,"container"],[1,"text-center","mb-4",2,"color","#2c3e50","font-weight","bold"],[1,"table","table-striped","table-hover"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],[1,"img-thumbnail",2,"width","80px","height","auto",3,"src","alt"],[1,"d-flex","justify-content-between"],[1,"btn","btn-primary","me-2",3,"routerLink"],[1,"btn","btn-info","me-2",3,"routerLink"],["class","btn btn-danger",3,"click",4,"ngIf"],[1,"btn","btn-danger",3,"click"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"h2",1),r(2,"Car List"),e(),i(3,"table",2)(4,"thead",3)(5,"tr")(6,"th",4),r(7,"Car Model"),e(),i(8,"th",4),r(9,"Type"),e(),i(10,"th",4),r(11,"Model Year"),e(),i(12,"th",4),r(13,"Image"),e(),i(14,"th",4),r(15,"Actions"),e()()(),i(16,"tbody"),v(17,He,16,13,"tr",5),e()()()),n&2&&(s(17),d("ngForOf",o.Cars))},dependencies:[P,I,se],styles:[".card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;border-radius:10px;box-shadow:0 4px 8px #0003;padding:20px;width:350px;min-height:350px;margin:auto}.card-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:85%;box-shadow:#0000003d 0 3px 8px;border-radius:10px;align-items:center;margin:auto}.image-container[_ngcontent-%COMP%]{flex:0 0 40%;padding:15px}.car-image[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:cover}.car-info[_ngcontent-%COMP%]{flex:1 1 auto;padding:15px}.actions[_ngcontent-%COMP%]{flex:0 0 auto;padding:15px;display:flex;flex-direction:column;gap:10px}.custom-button[_ngcontent-%COMP%]{border:none;padding:12px 20px;font-size:16px;font-weight:700;border-radius:8px;cursor:pointer;transition:background-color .3s ease-in-out,transform .2s ease-in-out}.edit-button[_ngcontent-%COMP%]{background-color:#33b5e5;color:#fff}.see-button[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.delete-button[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.container[_ngcontent-%COMP%]{width:100%;padding:20px;display:flex;flex-wrap:wrap;justify-content:center}@media (max-width: 768px){.container[_ngcontent-%COMP%]{justify-content:space-around}.card-content[_ngcontent-%COMP%]{max-width:100%;margin:auto}.image-container[_ngcontent-%COMP%]{flex:1 1 100%;padding:10px}.car-info[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{padding:10px;flex-direction:row;justify-content:space-between}.custom-button[_ngcontent-%COMP%]{padding:8px 15px;font-size:14px}}@media (max-width: 480px){.card-content[_ngcontent-%COMP%]{max-width:100%;margin:auto}.car-info[_ngcontent-%COMP%]{text-align:center}.actions[_ngcontent-%COMP%]{flex-direction:column;gap:5px}.custom-button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 992px){.container[_ngcontent-%COMP%]{justify-content:space-around}.card-content[_ngcontent-%COMP%]{max-width:80%;margin:auto}.image-container[_ngcontent-%COMP%]{flex:1 1 100%;padding:10px}.car-info[_ngcontent-%COMP%]{padding:10px}.actions[_ngcontent-%COMP%]{padding:10px;flex-direction:column;justify-content:space-between}.custom-button[_ngcontent-%COMP%]{padding:8px 15px;font-size:14px}}.edit-button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border:none}.edit-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.see-button[_ngcontent-%COMP%]{background-color:#5cb300;color:#fff;border:none}.see-button[_ngcontent-%COMP%]:hover{background-color:#4b8b07}.delete-button[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none}.delete-button[_ngcontent-%COMP%]:hover{background-color:#b02a37}.edit-link[_ngcontent-%COMP%]{color:#fff;text-decoration:none}"]});let a=l;return a})();var Ke=a=>["/driver/edit-Driver",a];function Je(a,l){if(a&1){let c=N();i(0,"button",23),u("click",function(){T(c);let n=x().$implicit,o=x();return L(o.deleteCar(n.ID))}),r(1,"Delete"),e()}}function Qe(a,l){if(a&1&&(i(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7),p(5,"img",8),e(),i(6,"div",9),p(7,"img",10),e(),i(8,"div",9),p(9,"img",11),e(),i(10,"div",9),p(11,"img",11),e()(),i(12,"button",12),p(13,"span",13),i(14,"span",14),r(15,"Previous"),e()(),i(16,"button",15),p(17,"span",16),i(18,"span",14),r(19,"Next"),e()()(),i(20,"div",17)(21,"h5",18),r(22),e(),i(23,"p")(24,"strong"),r(25,"Type:"),e(),r(26),e(),i(27,"p")(28,"strong"),r(29,"Driver Name:"),e(),r(30),e(),i(31,"p")(32,"strong"),r(33,"Email:"),e(),r(34),e(),i(35,"p")(36,"strong"),r(37,"Phone Number:"),e(),r(38),e()()(),i(39,"div",19)(40,"button",20)(41,"a",21),r(42,"Edit"),e()(),v(43,Je,2,0,"button",22),e()()),a&2){let c=l.$implicit,t=l.index;s(2),ee("id","carousel",t,""),s(3),d("src","http://localhost:5227/"+c.Image1,y),s(2),d("src","http://localhost:5227/"+c.Image2,y),s(2),d("src","http://localhost:5227/"+c.ImageLinces,y),s(2),d("src","http://localhost:5227/"+c.ServiceProvider.Attachment,y),s(),pe("data-bs-target","#carousel"+t),s(4),pe("data-bs-target","#carousel"+t),s(6),ie("",c.CarModel," - ",c.ModelYear,""),s(4),h(" ",c.TypeCar,""),s(4),h(" ",c.ServiceProvider.User.FullName,""),s(4),h(" ",c.ServiceProvider.User.Email,""),s(4),h(" ",c.ServiceProvider.User.PhoneNumber,""),s(3),d("routerLink",J(16,Ke,c.ID)),s(2),d("ngIf",c.ID)}}var Ne=(()=>{let l=class l{constructor(t,n,o){this.carser=t,this.cdRef=n,this.route=o,this.Cars=[]}ngOnInit(){this.route.paramMap.subscribe(t=>{let n=t.get("id");console.log("Retrieved carId from route:",n),n?this.fetchCarDetails(Number(n)):console.error("No carId found in route parameters.")})}fetchCarDetails(t){this.carser.GetAllDriverCarsbyid(t).subscribe({next:n=>{console.log("API response:",n),n&&Array.isArray(n)?(this.Cars=n,console.log("Car details:",this.Cars)):console.error("Cars not found in API response!"),setTimeout(()=>{this.cdRef.detectChanges()},0)},error:n=>{console.error("Error fetching data:",n)}})}deleteCar(t){if(!t){console.error("Delete failed: ID is undefined or null.");return}confirm("Are you sure you want to delete this car?")&&this.carser.delete(t).subscribe({next:()=>{console.log("Car deleted successfully!"),this.Cars=this.Cars.filter(n=>n.ID!==t),this.cdRef.detectChanges()},error:n=>{console.error("Error deleting car:",n),n.status===404?console.error("Car not found (404)."):n.status===500?console.error("Server error (500)."):console.error("Unknown error:",n)}})}};l.\u0275fac=function(n){return new(n||l)(g(S),g(A),g(j))},l.\u0275cmp=C({type:l,selectors:[["app-see-driver-list"]],decls:4,vars:1,consts:[[1,"container","py-3"],[1,"header","text-center","mb-4",2,"color","#2c3e50","font-weight","bold"],["class","card shadow-lg mx-auto","style","max-width: 800px; border-radius: 12px; overflow: hidden;",4,"ngFor","ngForOf"],[1,"card","shadow-lg","mx-auto",2,"max-width","800px","border-radius","12px","overflow","hidden"],[1,"d-flex","align-items-center",2,"background-color","#f8f9fa"],["data-bs-ride","carousel",1,"carousel","slide",2,"width","40%","position","relative",3,"id"],[1,"carousel-inner",2,"border-radius","8px","height","205px"],[1,"carousel-item","active"],["alt","Car Image 1",1,"d-block","w-100",2,"object-fit","cover",3,"src"],[1,"carousel-item"],["alt","Car Image 2",1,"d-block","w-100",3,"src"],["alt","License Image",1,"d-block","w-100",3,"src"],["type","button","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"car-info","p-4",2,"width","60%","color","#34495e"],[2,"font-weight","bold"],[1,"card-footer","text-center",2,"background-color","#e9ecef"],[1,"btn","btn-primary","me-2",2,"width","100px","font-weight","bold"],[2,"color","white","text-decoration","none",3,"routerLink"],["class","btn btn-danger","style","width: 100px; font-weight: bold;",3,"click",4,"ngIf"],[1,"btn","btn-danger",2,"width","100px","font-weight","bold",3,"click"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"h2",1),r(2,"Your Driver's Details"),e(),v(3,Qe,44,18,"div",2),e()),n&2&&(s(3),d("ngForOf",o.Cars))},dependencies:[P,I,se],styles:[".container[_ngcontent-%COMP%]{max-width:900px}.card[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;margin-bottom:20px;box-shadow:0 4px 8px #0000001a}.image-slider-container[_ngcontent-%COMP%]{border-right:4px solid #2c3e50;padding:10px}.car-info[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#2c3e50}.card-footer[_ngcontent-%COMP%]{background-color:#e9ecef;padding:10px 0}.btn-primary[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{width:100px;font-weight:700}.btn-primary[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none}.mySwiper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;border-radius:8px}.carousel-image[_ngcontent-%COMP%]{object-fit:cover;border-radius:8px;height:205px;width:100%}"]});let a=l;return a})();function Xe(a,l){if(a&1&&(i(0,"option",27),r(1),e()),a&2){let c=l.$implicit;d("value",c),s(),h(" ",c," ")}}var je=(()=>{let l=class l{constructor(t,n,o,f,m){this.fb=t,this.carService=n,this.http=o,this.active=f,this.toastr=m,this.modelYears=[],this.selectedFiles={},this.carId=0,this.carDetails=null,this.imagePreviews={},this.Cars=[],this.successMessage=null,this.listingForm=this.fb.group({TypeCar:["",[b.minLength(2),b.maxLength(50)]],CarModel:["",[b.minLength(2),b.maxLength(50)]],ModelYear:["",[b.pattern("^(19|20)\\d{2}$")]],Image1:[""],Image2:[""],ImageLinces:[""],file:[""]})}ngOnInit(){this.carId=+this.active.snapshot.params.id,this.fetchData();let t=new Date().getFullYear();this.modelYears=Array.from({length:t-1980+1},(n,o)=>t-o)}fetchData(){this.carService.getAllCars().subscribe({next:t=>{if(console.log("API response:",t),Array.isArray(t)&&t.length>0){this.Cars=t.map(o=>M(E({},o),{Image1:o.Image1?o.Image1.replace(/\\/g,"/"):"",Image2:o.Image2?o.Image2.replace(/\\/g,"/"):"",ImageLinces:o.ImageLinces?o.ImageLinces.replace(/\\/g,"/"):"",ServiceProvider:M(E({},o.ServiceProvider),{Attachment:o.ServiceProvider?.Attachment?o.ServiceProvider.Attachment.replace(/\\/g,"/"):null})}));let n=this.Cars.find(o=>o.ID===this.carId);n?(this.carDetails=n,this.listingForm.patchValue({TypeCar:this.carDetails.TypeCar,CarModel:this.carDetails.CarModel,ModelYear:this.carDetails.ModelYear,Image1:this.carDetails.Image1,Image2:this.carDetails.Image2,ImageLinces:this.carDetails.ImageLinces,file:this.carDetails.ServiceProvider.Attachment}),this.imagePreviews.Image1=this.carDetails.Image1||null,this.imagePreviews.Image2=this.carDetails.Image2||null,this.imagePreviews.ImageLinces=this.carDetails.ImageLinces||null,this.imagePreviews.file=this.carDetails.ServiceProvider.Attachment||null,console.log("Car details populated in form:",this.carDetails)):console.error("Car not found for the provided carId:",this.carId)}else console.error("API response is not an array or is empty"),this.Cars=[]},error:t=>{console.error("Error fetching data:",t)}})}onFileChange(t,n){let o=t.target.files[0],f=["image/jpeg","image/png","image/jpg"];if(o&&o.size>0&&f.includes(o.type)){this.selectedFiles[n]=o,this.listingForm.patchValue({[n]:o}),this.listingForm.get(n)?.setErrors(null);let m=new FileReader;m.onload=()=>{this.imagePreviews[n]=m.result,console.log("Image previews:",this.imagePreviews)},m.onerror=k=>{console.error("Error reading file:",k)},m.readAsDataURL(o)}else this.listingForm.get(n)?.setErrors({invalidFileType:!0}),this.selectedFiles[n]=null}onSubmit(){if(this.listingForm.valid){let t=new FormData,n=this.listingForm.value;t.append("Id",this.carId.toString()),t.append("TypeCar",n.TypeCar),t.append("CarModel",n.CarModel),t.append("ModelYear",n.ModelYear),t.append("Image1",this.selectedFiles.Image1||this.carDetails?.Image1||""),t.append("Image2",this.selectedFiles.Image2||this.carDetails?.Image2||""),t.append("ImageLinces",this.selectedFiles.ImageLinces||this.carDetails?.ImageLinces||""),t.append("file",this.selectedFiles.file||this.carDetails?.ServiceProvider.Attachment||""),this.carService.editCar(t).subscribe(o=>{console.log("Car listing edited successfully!",o),this.toastr.success("Car listing updated successfully!","Success")},o=>{console.error("Error editing car listing:",o),this.toastr.error("Failed to update car listing. Please try again.","Error")})}else console.error("Form is invalid")}};l.\u0275fac=function(n){return new(n||l)(g(W),g(S),g(R),g(j),g($))},l.\u0275cmp=C({type:l,selectors:[["app-eidt-file-driver"]],decls:62,vars:2,consts:[[1,"container","my-5"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"card","my-4"],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col-md-6","mb-3"],["for","TypeCar"],["type","text","id","TypeCar","formControlName","TypeCar","placeholder","Enter Car type",1,"form-control"],["for","CarModel"],["type","text","id","CarModel","formControlName","CarModel","placeholder","Enter Car Model",1,"form-control"],["for","ModelYear"],["id","ModelYear","formControlName","ModelYear",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","mb-3"],["for","Image1"],[1,"upload-container"],["type","file","id","Image1","formControlName","Image1",1,"form-control-file",3,"change"],["for","Image2"],["type","file","id","Image2","formControlName","Image2",1,"form-control-file",3,"change"],["for","ImageLinsecs"],["type","file","id","ImageLinsecs","formControlName","ImageLinsecs",1,"form-control-file",3,"change"],["for","file"],["type","file","id","file","formControlName","file",1,"form-control-file",3,"change"],["type","submit",1,"btn","btn-primary","btn-block","m-5"],[3,"value"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"h1",1),r(2,"Change Driver Information"),e(),i(3,"p",1),r(4," Praise effects wish change way and any wanted. Lively use looked latter regard had. "),e(),i(5,"form",2),u("ngSubmit",function(){return o.onSubmit()}),i(6,"div",3)(7,"div",4)(8,"h5",5),r(9,"Car Detail"),e(),i(10,"div",6)(11,"div",7)(12,"label",8),r(13,"Car type"),e(),i(14,"div"),p(15,"input",9),e()(),i(16,"div",7)(17,"label",10),r(18,"Car model"),e(),i(19,"div"),p(20,"input",11),e()(),i(21,"div",7)(22,"label",12),r(23,"Model Year"),e(),i(24,"select",13)(25,"option",14),r(26,"Select Model Year"),e(),v(27,Xe,2,2,"option",15),e()(),i(28,"div",16)(29,"label",17),r(30,"Car Image 1"),e(),i(31,"div",18)(32,"input",19),u("change",function(m){return o.onFileChange(m,"Image1")}),e(),i(33,"p"),r(34,"Drop files here or click to upload."),e()()(),i(35,"div",16)(36,"label",20),r(37,"Car Image2"),e(),i(38,"div",18)(39,"input",21),u("change",function(m){return o.onFileChange(m,"Image2")}),e(),i(40,"p"),r(41,"Drop files here or click to upload."),e()()(),i(42,"div",16)(43,"label",22),r(44,"License Number Car"),e(),i(45,"div",18)(46,"input",23),u("change",function(m){return o.onFileChange(m,"ImageLinsecs")}),e(),i(47,"p"),r(48,"Drop files here or click to upload."),e()()()()()(),i(49,"div",3)(50,"div",4)(51,"h5",5),r(52,"Driver Detail"),e(),i(53,"div",16)(54,"label",24),r(55,"License Number Personal"),e(),i(56,"div",18)(57,"input",25),u("change",function(m){return o.onFileChange(m,"file")}),e(),i(58,"p"),r(59,"Drop files here or click to upload."),e()()()()(),i(60,"button",26),r(61," Change Car "),e()()()),n&2&&(s(5),d("formGroup",o.listingForm),s(22),d("ngForOf",o.modelYears))},dependencies:[P,V,U,G,w,z,F,Y,B,q],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 0 10px #0000001a;border-radius:8px}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.upload-container[_ngcontent-%COMP%]{border:2px dashed #007bff;padding:1rem;text-align:center;border-radius:8px}"]});let a=l;return a})();function Ze(a,l){if(a&1&&(i(0,"option",27),r(1),e()),a&2){let c=l.$implicit;d("value",c),s(),h(" ",c," ")}}var Ye=(()=>{let l=class l{constructor(t,n,o,f){this.fb=t,this.carService=n,this.http=o,this.toastr=f,this.modelYears=[],this.selectedFiles={},this.successMessage=null,this.listingForm=this.fb.group({TypeCar:["",[b.required,b.minLength(2),b.maxLength(50)]],CarModel:["",[b.required,b.minLength(2),b.maxLength(50)]],ModelYear:["",[b.required,b.pattern("^(19|20)\\d{2}$")]],Image1:[null,b.required],Image2:[null,b.required],ImageLinsecs:[null,[b.required]],file:[null,b.required]});let m=new Date().getFullYear();for(let k=1980;k<=m;k++)this.modelYears.push(k)}onFileChange(t,n){let o=t.target.files[0];o&&["image/jpeg","image/png","image/jpg"].includes(o.type)?(this.selectedFiles[n]=o,this.listingForm.patchValue({[n]:o}),this.listingForm.get(n)?.setErrors(null)):(console.error("Invalid file type or empty file. Only JPG, JPEG, and PNG are allowed."),this.listingForm.get(n)?.setErrors({invalidFileType:!0}))}onSubmit(){if(this.listingForm.valid){let t=new FormData,n=this.listingForm.value;t.append("ServiceProviderID",n.ServiceProviderID),t.append("TypeCar",n.TypeCar),t.append("CarModel",n.CarModel),t.append("ModelYear",n.ModelYear),this.selectedFiles.Image1?t.append("Image1",this.selectedFiles.Image1):console.error("Image1 is missing"),this.selectedFiles.Image2?t.append("Image2",this.selectedFiles.Image2):console.error("Image2 is missing"),this.selectedFiles.ImageLinsecs?t.append("ImageLinsecs",this.selectedFiles.ImageLinsecs):console.error("ImageLinsecs is missing"),this.selectedFiles.file?t.append("file",this.selectedFiles.file):console.error("File is missing"),this.carService.addCar(t).subscribe(o=>{console.log("Car listing added successfully!",o),this.toastr.success("Car listing added successfully!","Success")},o=>{console.error("Error adding car listing:",o),this.toastr.error("Failed to added car listing. Please try again.","Error")})}else console.error("Form is invalid")}};l.\u0275fac=function(n){return new(n||l)(g(W),g(S),g(R),g($))},l.\u0275cmp=C({type:l,selectors:[["app-add-listing-driver"]],decls:62,vars:2,consts:[[1,"container","my-5"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"card","my-4"],[1,"card-body"],[1,"card-title"],[1,"row"],[1,"col-md-6","mb-3"],["for","TypeCar"],["type","text","id","TypeCar","formControlName","TypeCar","placeholder","Enter Car type",1,"form-control"],["for","CarModel"],["type","text","id","CarModel","formControlName","CarModel","placeholder","Enter Car Model",1,"form-control"],["for","ModelYear"],["id","ModelYear","formControlName","ModelYear",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-12","mb-3"],["for","Image1"],[1,"upload-container"],["type","file","id","Image1",1,"form-control-file",3,"change"],["for","Image2"],["type","file","id","Image2",1,"form-control-file",3,"change"],["for","ImageLinsecs"],["type","file","id","ImageLinsecs",1,"form-control-file",3,"change"],["for","file"],["type","file","id","file",1,"form-control-file",3,"change"],["type","submit",1,"btn","btn-primary","btn-block","m-5"],[3,"value"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"h1",1),r(2,"Add New Listing Driver"),e(),i(3,"p",1),r(4," Praise effects wish change way and any wanted. Lively use looked latter regard had. "),e(),i(5,"form",2),u("ngSubmit",function(){return o.onSubmit()}),i(6,"div",3)(7,"div",4)(8,"h5",5),r(9,"Car Detail"),e(),i(10,"div",6)(11,"div",7)(12,"label",8),r(13,"Car type"),e(),i(14,"div"),p(15,"input",9),e()(),i(16,"div",7)(17,"label",10),r(18,"Car model"),e(),i(19,"div"),p(20,"input",11),e()(),i(21,"div",7)(22,"label",12),r(23,"Model Year"),e(),i(24,"select",13)(25,"option",14),r(26,"Select Model Year"),e(),v(27,Ze,2,2,"option",15),e()(),i(28,"div",16)(29,"label",17),r(30,"Car Image1"),e(),i(31,"div",18)(32,"input",19),u("change",function(m){return o.onFileChange(m,"Image1")}),e(),i(33,"p"),r(34,"Drop files here or click to upload."),e()()(),i(35,"div",16)(36,"label",20),r(37,"Car Image2"),e(),i(38,"div",18)(39,"input",21),u("change",function(m){return o.onFileChange(m,"Image2")}),e(),i(40,"p"),r(41,"Drop files here or click to upload."),e()()(),i(42,"div",16)(43,"label",22),r(44,"License Number Car"),e(),i(45,"div",18)(46,"input",23),u("change",function(m){return o.onFileChange(m,"ImageLinsecs")}),e(),i(47,"p"),r(48,"Drop files here or click to upload."),e()()()()()(),i(49,"div",3)(50,"div",4)(51,"h5",5),r(52,"Driver Detail"),e(),i(53,"div",16)(54,"label",24),r(55,"License Number Personal"),e(),i(56,"div",18)(57,"input",25),u("change",function(m){return o.onFileChange(m,"file")}),e(),i(58,"p"),r(59,"Drop files here or click to upload."),e()()()()(),i(60,"button",26),r(61," Add listing "),e()()()),n&2&&(s(5),d("formGroup",o.listingForm),s(22),d("ngForOf",o.modelYears))},dependencies:[P,V,U,G,w,z,F,Y,B,q],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:auto}.card[_ngcontent-%COMP%]{border:none;box-shadow:0 0 10px #0000001a;border-radius:8px}.card-title[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border-color:#007bff}.upload-container[_ngcontent-%COMP%]{border:2px dashed #007bff;padding:1rem;text-align:center;border-radius:8px}"]});let a=l;return a})();var me=(()=>{let l=class l{constructor(){this.localStorageKey="bookingCarID"}setBookingCarID(t){localStorage.setItem(this.localStorageKey,t.toString())}getBookingCarID(){let t=localStorage.getItem(this.localStorageKey);return t?Number(t):null}clearBookingCarID(){localStorage.removeItem(this.localStorageKey)}};l.\u0275fac=function(n){return new(n||l)},l.\u0275prov=ue({token:l,factory:l.\u0275fac,providedIn:"root"});let a=l;return a})();function et(a,l){if(a&1){let c=N();i(0,"button",14),u("click",function(){T(c);let n=x().$implicit,o=x();return L(o.navigateToProposals(n.ID))}),r(1," Propose a Car "),e()}}function tt(a,l){if(a&1&&(i(0,"div",21)(1,"div",22)(2,"div",23)(3,"h5",24),r(4),O(5,"uppercase"),e(),i(6,"div",25)(7,"div",26)(8,"span",27),r(9,"Pickup:"),e(),i(10,"p",28),r(11),e()(),i(12,"div",26)(13,"span",27),r(14,"Drop:"),e(),i(15,"p",29),r(16),e()()()(),i(17,"div",13)(18,"p",30),r(19),e(),i(20,"p",27),r(21),e()(),i(22,"div",31)(23,"p",27),r(24," Journey Date: "),i(25,"span",32),r(26),O(27,"date"),e()()()(),i(28,"div",33),v(29,et,2,0,"button",34),e()()),a&2){let c=l.$implicit,t=x();s(4),h(" ",ge(5,7,c.PickupAddress)," "),s(7),h(" ",c.PickupAddress," "),s(5),_(c.DropAddress),s(3),h(" ",c.SugestedPrice," $ "),s(2),h(" Passengers: ",c.PassengersNo," "),s(5),_(ge(27,9,c.DateTime)),s(3),d("ngIf",t.isDriver)}}var Be=(()=>{let l=class l{constructor(t,n,o,f,m){this.bookingService=t,this.router=n,this.dataStorageService=o,this.cdr=f,this.registerService=m,this.CarRequests=[],this.paginatedCarRequests=[],this.pickupLocationFilter="",this.dropLocationFilter="",this.maxPriceFilter=0,this.currentPage=1,this.totalPages=1,this.itemsPerPage=5,this.isDriver=!1}ngAfterViewInit(){this.fetchAllBookings(),this.fetchUserRole()}fetchUserRole(){this.registerService.getUserByID().subscribe(t=>{this.isDriver=t?.Role==="Driver",this.cdr.markForCheck(),console.log("Is Driver:",this.isDriver)})}navigateToProposals(t){this.isDriver?(this.dataStorageService.setBookingCarID(t),this.router.navigate(["/driver/CarProposel"])):console.warn("Only drivers can propose a car")}fetchAllBookings(){this.bookingService.getAllBookingList().subscribe(t=>{console.log("Full API Response:",t),console.log("Is Driver:",this.isDriver),Array.isArray(t)?(this.CarRequests=t,this.paginatedCarRequests=this.CarRequests.slice(0,this.itemsPerPage),this.totalPages=Math.ceil(this.CarRequests.length/this.itemsPerPage)):console.error("CarRequest is missing or not an array in the API response")},t=>{console.error("Error fetching bookings:",t)})}applyFilters(){let t=this.CarRequests;this.pickupLocationFilter&&(t=t.filter(n=>n.PickupAddress.toLowerCase().includes(this.pickupLocationFilter.toLowerCase()))),this.dropLocationFilter&&(t=t.filter(n=>n.DropAddress.toLowerCase().includes(this.dropLocationFilter.toLowerCase()))),this.maxPriceFilter&&(t=t.filter(n=>n.SugestedPrice<=this.maxPriceFilter)),this.paginatedCarRequests=t.slice(0,this.itemsPerPage),this.totalPages=Math.ceil(t.length/this.itemsPerPage),this.currentPage=1}clearFilters(){this.pickupLocationFilter="",this.dropLocationFilter="",this.maxPriceFilter=0,this.paginatedCarRequests=this.CarRequests.slice(0,this.itemsPerPage),this.currentPage=1}previousPage(){this.currentPage>1&&(this.currentPage--,this.paginate())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.paginate())}paginate(){let t=(this.currentPage-1)*this.itemsPerPage;this.paginatedCarRequests=this.CarRequests.slice(t,t+this.itemsPerPage)}};l.\u0275fac=function(n){return new(n||l)(g(S),g(Se),g(me),g(A),g(we))},l.\u0275cmp=C({type:l,selectors:[["app-CarBookingRequests"]],decls:32,vars:8,consts:[[1,"vstack","gap-4"],[1,"card","shadow-sm","rounded"],[1,"card-header","bg-primary","text-white","p-4","rounded-top"],[1,"mb-0","fs-3"],[1,"filter-inputs","p-4","bg-light"],[1,"row","g-3","align-items-center"],[1,"col-md-3"],["for","pickupLocation",1,"form-label","fw-bold"],["type","text","id","pickupLocation","placeholder","Pickup address",1,"form-control",3,"ngModelChange","ngModel"],["for","dropLocation",1,"form-label","fw-bold"],["type","text","id","dropLocation","placeholder","Drop location",1,"form-control",3,"ngModelChange","ngModel"],["for","priceFilter",1,"form-label","fw-bold"],["type","number","id","priceFilter","placeholder","Max price",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-3","text-end"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary","ms-2",3,"click"],["class","card-body border-bottom p-4 bg-white rounded shadow-sm mb-3",4,"ngFor","ngForOf"],[1,"pagination-controls","text-center","p-3"],[1,"btn","btn-primary","me-3",3,"click","disabled"],[1,"btn","btn-outline-primary"],[1,"btn","btn-primary","ms-3",3,"click","disabled"],[1,"card-body","border-bottom","p-4","bg-white","rounded","shadow-sm","mb-3"],[1,"row","align-items-center"],[1,"col-md-9"],[1,"card-title","mb-2","text-primary"],[1,"row"],[1,"col-md-6"],[1,"text-muted"],[1,"h6","fw-normal","mb-md-0"],[1,"h6","fw-normal","mb-0"],[1,"h6","text-success","fw-bold"],[1,"col-md-12","mt-2"],[1,"fw-normal"],[1,"col-md-12","mt-2","text-end"],["class","btn btn-primary",3,"click",4,"ngIf"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4,"Booking Requests"),e()(),i(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),r(9,"Pickup Location"),e(),i(10,"input",8),oe("ngModelChange",function(m){return re(o.pickupLocationFilter,m)||(o.pickupLocationFilter=m),m}),e()(),i(11,"div",6)(12,"label",9),r(13,"Drop Location"),e(),i(14,"input",10),oe("ngModelChange",function(m){return re(o.dropLocationFilter,m)||(o.dropLocationFilter=m),m}),e()(),i(15,"div",6)(16,"label",11),r(17,"Max Price"),e(),i(18,"input",12),oe("ngModelChange",function(m){return re(o.maxPriceFilter,m)||(o.maxPriceFilter=m),m}),e()(),i(19,"div",13)(20,"button",14),u("click",function(){return o.applyFilters()}),r(21," Filter "),e(),i(22,"button",15),u("click",function(){return o.clearFilters()}),r(23," Clear "),e()()()(),v(24,tt,30,11,"div",16),i(25,"div",17)(26,"button",18),u("click",function(){return o.previousPage()}),r(27," Previous "),e(),i(28,"span",19),r(29),e(),i(30,"button",20),u("click",function(){return o.nextPage()}),r(31," Next "),e()()()()),n&2&&(s(10),ne("ngModel",o.pickupLocationFilter),s(4),ne("ngModel",o.dropLocationFilter),s(4),ne("ngModel",o.maxPriceFilter),s(6),d("ngForOf",o.paginatedCarRequests),s(2),d("disabled",o.currentPage===1),s(3),ie("Page ",o.currentPage," of ",o.totalPages,""),s(),d("disabled",o.currentPage===o.totalPages))},dependencies:[P,I,w,ce,F,Ie,xe,Ce]});let a=l;return a})();function it(a,l){if(a&1&&(i(0,"option",13),r(1),e()),a&2){let c=l.$implicit;d("value",c.ID),s(),be(" ",c.CarModel," ",c.ModelYear,"-",c.TypeCar," ")}}function nt(a,l){if(a&1&&(i(0,"div",14),r(1),e()),a&2){let c=x();s(),h(" ",c.successMessage," ")}}var qe=(()=>{let l=class l{constructor(t,n,o,f,m,k){this.fb=t,this.carPropsolsService=n,this.route=o,this.dataStorageService=f,this.carService=m,this.toastr=k,this.successMessage=null,this.Cars=[]}ngOnInit(){this.bookingCarID=this.dataStorageService.getBookingCarID(),this.initializeForm(),this.fetchData()}initializeForm(){this.carPropsolsForm=this.fb.group({ReviewText:[null],ReviewNo:[null],Price:["",b.required],carID:["",b.required],BookingCarID:[this.bookingCarID,b.required]})}fetchData(){this.carService.getAllCars().subscribe({next:t=>{console.log("API response:",t),Array.isArray(t)?this.Cars=t.map(n=>M(E({},n),{Image1:n.Image1?n.Image1.replace(/\\/g,"/"):"",Image2:n.Image2?n.Image2.replace(/\\/g,"/"):"",ImageLinces:n.ImageLinces?n.ImageLinces.replace(/\\/g,"/"):"",ServiceProvider:M(E({},n.ServiceProvider),{Attachment:n.ServiceProvider?.Attachment?n.ServiceProvider.Attachment.replace(/\\/g,"/"):null})})):(console.error("API response is not an array"),this.Cars=[])},error:t=>{console.error("Error fetching data:",t)}})}onSubmit(){this.carPropsolsForm.valid?this.carPropsolsService.addCarPropsols(this.carPropsolsForm.value).subscribe({next:t=>{console.log("Proposal added successfully",t),this.toastr.error("Proposal added successfully"),this.carPropsolsForm.reset()},error:t=>{console.error("Error adding proposal",t),this.successMessage=null}}):(console.log("Form is not valid"),this.successMessage=null)}};l.\u0275fac=function(n){return new(n||l)(g(W),g(Te),g(j),g(me),g(S),g($))},l.\u0275cmp=C({type:l,selectors:[["app-car-propsols"]],decls:22,vars:3,consts:[[1,"container"],[3,"ngSubmit","formGroup"],["for","ReviewText"],["id","ReviewText","formControlName","ReviewText","type","text"],["for","ReviewNo"],["id","ReviewNo","formControlName","ReviewNo","type","number"],["for","Price"],["id","Price","formControlName","Price","type","number","required",""],["for","CarID"],["id","CarID","formControlName","carID","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit"],["class","alert alert-success mt-3",4,"ngIf"],[3,"value"],[1,"alert","alert-success","mt-3"]],template:function(n,o){n&1&&(i(0,"div",0)(1,"form",1),u("ngSubmit",function(){return o.onSubmit()}),i(2,"div")(3,"label",2),r(4,"Welcomig Message:"),e(),p(5,"input",3),e(),i(6,"div")(7,"label",4),r(8,"Hours To Reach"),e(),p(9,"input",5),e(),i(10,"div")(11,"label",6),r(12,"Price:"),e(),p(13,"input",7),e(),i(14,"div")(15,"label",8),r(16,"Your Car Model:"),e(),i(17,"select",9),v(18,it,2,4,"option",10),e()(),i(19,"button",11),r(20,"Submit"),e()(),v(21,nt,2,1,"div",12),e()),n&2&&(s(),d("formGroup",o.carPropsolsForm),s(17),d("ngForOf",o.Cars),s(3),d("ngIf",o.successMessage))},dependencies:[P,I,V,U,G,w,ce,z,F,Y,Ee,B,q],styles:[".container[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;padding:25px;background:linear-gradient(135deg,#fff,#f0f3fa);border-radius:12px;box-shadow:0 4px 15px #0000001a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}label[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:5px;font-size:16px;letter-spacing:.5px}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:16px;color:#333;background-color:#fafafa;transition:border-color .3s ease,box-shadow .3s ease}input[type=text][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 10px #007bff33;outline:none}input[type=checkbox][_ngcontent-%COMP%]{margin-left:10px;transform:scale(1.2)}input[type=checkbox][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:14px;margin-left:5px;vertical-align:middle}button[type=submit][_ngcontent-%COMP%]{padding:12px 20px;background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;letter-spacing:1px;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease}button[type=submit][_ngcontent-%COMP%]:hover{background-color:#0048a1;box-shadow:0 4px 15px #0048a14d}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{box-shadow:0 2px 5px #0000000d}label[_ngcontent-%COMP%]{margin-bottom:10px;color:#555}option[_ngcontent-%COMP%]{padding:10px}@media (max-width: 600px){.container[_ngcontent-%COMP%]{padding:20px}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:14px 0}}"]});let a=l;return a})();function rt(a,l){if(a&1&&(i(0,"div",14)(1,"div",15)(2,"div",16),p(3,"img",17),i(4,"div")(5,"h5",18),r(6),e(),i(7,"p",19)(8,"strong"),r(9,"Review Text:"),e(),r(10),p(11,"br"),i(12,"strong"),r(13,"Price:"),e(),r(14),O(15,"number"),e()()(),i(16,"button",20),p(17,"i",8),r(18," Waiting "),e()()()),a&2){let c=l.$implicit;s(3),d("src","http://localhost:5227/"+c.Car.Image1,y),s(3),_(c.Car.CarModel),s(4),h(" ",c.ReviewText,""),s(4),h(" $",ae(15,4,c.Price,"1.2-2")," ")}}function ot(a,l){if(a&1&&(X(0),v(1,rt,19,7,"div",13),Z()),a&2){let c=x(2);s(),d("ngForOf",c.waitingProposals)}}function at(a,l){a&1&&(i(0,"p",21),r(1,"No waiting proposals."),e())}function lt(a,l){if(a&1&&(i(0,"div"),v(1,ot,2,1,"ng-container",12)(2,at,2,0,"ng-template",null,0,le),e()),a&2){let c=te(3),t=x();s(),d("ngIf",t.waitingProposals.length>0)("ngIfElse",c)}}function st(a,l){if(a&1&&(i(0,"div",14)(1,"div",22)(2,"div",16),p(3,"img",17),i(4,"div")(5,"h5",23),r(6),e(),i(7,"p",19)(8,"strong"),r(9,"Review Text:"),e(),r(10),p(11,"br"),i(12,"strong"),r(13,"Price:"),e(),r(14),O(15,"number"),e()()(),i(16,"button",24),p(17,"i",9),r(18," Rejected "),e()()()),a&2){let c=l.$implicit;s(3),d("src","http://localhost:5227/"+c.Car.Image1,y),s(3),_(c.Car.CarModel),s(4),h(" ",c.ReviewText,""),s(4),h(" $",ae(15,4,c.Price,"1.2-2")," ")}}function ct(a,l){if(a&1&&(X(0),v(1,st,19,7,"div",13),Z()),a&2){let c=x(2);s(),d("ngForOf",c.rejectedProposals)}}function dt(a,l){a&1&&(i(0,"p",21),r(1,"No rejected proposals."),e())}function mt(a,l){if(a&1&&(i(0,"div"),v(1,ct,2,1,"ng-container",12)(2,dt,2,0,"ng-template",null,1,le),e()),a&2){let c=te(3),t=x();s(),d("ngIf",t.rejectedProposals.length>0)("ngIfElse",c)}}function pt(a,l){if(a&1&&(i(0,"div",14)(1,"div",25)(2,"div",16),p(3,"img",17),i(4,"div")(5,"h5",26),r(6),e(),i(7,"p",19)(8,"strong"),r(9,"Review Text:"),e(),r(10),p(11,"br"),i(12,"strong"),r(13,"Price:"),e(),r(14),O(15,"number"),e()()(),i(16,"button",27),p(17,"i",10),r(18," Accepted "),e()()()),a&2){let c=l.$implicit;s(3),d("src","http://localhost:5227/"+c.Car.Image1,y),s(3),_(c.Car.CarModel),s(4),h(" ",c.ReviewText,""),s(4),h(" $",ae(15,4,c.Price,"1.2-2")," ")}}function gt(a,l){if(a&1&&(X(0),v(1,pt,19,7,"div",13),Z()),a&2){let c=x(2);s(),d("ngForOf",c.acceptedProposals)}}function ft(a,l){a&1&&(i(0,"p",21),r(1,"No accepted proposals."),e())}function ut(a,l){if(a&1&&(i(0,"div"),v(1,gt,2,1,"ng-container",12)(2,ft,2,0,"ng-template",null,2,le),e()),a&2){let c=te(3),t=x();s(),d("ngIf",t.acceptedProposals.length>0)("ngIfElse",c)}}var ze=(()=>{let l=class l{constructor(t){this.carService=t,this.carProposals=[],this.waitingProposals=[],this.acceptedProposals=[],this.rejectedProposals=[]}ngOnInit(){this.loadCarProposals()}loadCarProposals(){this.carService.getCarProposals().subscribe({next:t=>{this.carProposals=t,this.categorizeProposals()},error:t=>{console.error("Error fetching car proposals",t)}})}categorizeProposals(){this.waitingProposals=this.carProposals.filter(t=>!t.State&&!t.IsRegectd),this.acceptedProposals=this.carProposals.filter(t=>t.State&&!t.IsRegectd),this.rejectedProposals=this.carProposals.filter(t=>t.IsRegectd)}onProposalAction(t,n){let o=new Date().toISOString();t.DateNow=o,n==="accept"?(t.State=!0,t.IsRegectd=!1):n==="reject"&&(t.State=!1,t.IsRegectd=!0),this.categorizeProposals()}};l.\u0275fac=function(n){return new(n||l)(g(S))},l.\u0275cmp=C({type:l,selectors:[["app-driver-car-proposl"]],decls:19,vars:9,consts:[["noWaitingProposals",""],["noRejectedProposals",""],["noAcceptedProposals",""],[1,"container",2,"width","75%"],[1,"text-center","mb-4",2,"color","#34495e","font-weight","bold","text-shadow","1px 1px 2px rgba(0,0,0,0.1)"],[1,"nav","nav-tabs","mb-4","justify-content-center"],[1,"nav-item"],[1,"nav-link",3,"click"],[1,"fas","fa-briefcase"],[1,"fas","fa-times-circle"],[1,"fas","fa-check-circle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","card mb-3","style","border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);",4,"ngFor","ngForOf"],[1,"card","mb-3",2,"border-radius","8px","box-shadow","0 4px 8px rgba(0,0,0,0.1)"],[1,"card-body","d-flex","justify-content-between","align-items-center",2,"background-color","#f9f9f9"],[1,"d-flex"],["alt","Car Image",2,"width","60px","height","60px","border-radius","8px","margin-right","10px",3,"src"],[1,"card-title","mb-1",2,"color","#2980b9","font-weight","bold"],[1,"card-text","mb-1","text-muted"],[1,"btn","btn-primary"],[1,"text-center","text-muted"],[1,"card-body","d-flex","justify-content-between","align-items-center",2,"background-color","#f8d7da"],[1,"card-title","mb-1",2,"color","#c0392b","font-weight","bold"],[1,"btn","btn-danger"],[1,"card-body","d-flex","justify-content-between","align-items-center",2,"background-color","#e9f7ef"],[1,"card-title","mb-1",2,"color","#27ae60","font-weight","bold"],[1,"btn","btn-success"]],template:function(n,o){n&1&&(i(0,"div",3)(1,"h2",4),r(2," Driver Car Proposals "),e(),i(3,"ul",5)(4,"li",6)(5,"a",7),u("click",function(){return o.currentTab="waiting"}),p(6,"i",8),r(7," Waiting Proposals "),e()(),i(8,"li",6)(9,"a",7),u("click",function(){return o.currentTab="rejected"}),p(10,"i",9),r(11," Rejected Proposals "),e()(),i(12,"li",6)(13,"a",7),u("click",function(){return o.currentTab="accepted"}),p(14,"i",10),r(15," Accepted Proposals "),e()()(),v(16,lt,4,2,"div",11)(17,mt,4,2,"div",11)(18,ut,4,2,"div",11),e()),n&2&&(s(5),Q("active",o.currentTab==="waiting"),s(4),Q("active",o.currentTab==="rejected"),s(4),Q("active",o.currentTab==="accepted"),s(3),d("ngIf",o.currentTab==="waiting"),s(),d("ngIf",o.currentTab==="rejected"),s(),d("ngIf",o.currentTab==="accepted"))},dependencies:[P,I,_e],styles:[".container[_ngcontent-%COMP%]{width:75%;margin:0 auto 20px;border-top:4px solid #2980b9;border-left:4px solid #2980b9;border-right:4px solid #2980b9;border-bottom:4px solid #2980b9;border-radius:10px;padding:20px;box-shadow:0 4px 8px #0000001a}.list-group-item[_ngcontent-%COMP%]{border-radius:10px;transition:transform .2s,box-shadow .3s}.lamp-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 20px;border:none;border-radius:25px;transition:background-color .3s,transform .2s;font-size:1rem;color:#fff}.btn-on[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;transition:background-color .3s}.btn-off[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;transition:background-color .3s}.lamp-button[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px 20px;border:none;border-radius:25px;font-size:1rem;transition:transform .2s}.lamp-button[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.bg-light[_ngcontent-%COMP%]{background-color:#f8f9fa!important}.bg-danger[_ngcontent-%COMP%]{background-color:#dc3545!important}.card[_ngcontent-%COMP%]{border:none;margin-bottom:20px}.card-body[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px}.card-title[_ngcontent-%COMP%]{font-size:1.1rem;margin:0}.btn[_ngcontent-%COMP%]{border-radius:20px}"]});let a=l;return a})();var Ue=(()=>{let l=class l{constructor(t){this.http=t,this.totalEarnings=0,this.totalCars=0,this.stateTrueCount=0,this.isRejectedCount=0,this.bookingCount=0,this.totalBalanceUrl="http://localhost:5227/LinkupAswan/BookingCar/TotalBalance",this.carCountsUrl="http://localhost:5227/api/CarPropsols/GetCarCounts"}ngOnInit(){this.fetchTotalEarnings(),this.fetchCarCounts()}fetchTotalEarnings(){this.http.get(this.totalBalanceUrl).subscribe(t=>{this.totalEarnings=t},t=>{console.error("Error fetching total earnings:",t)})}fetchCarCounts(){this.http.get(this.carCountsUrl).subscribe(t=>{this.totalCars=t.TotalCars,this.stateTrueCount=t.StateTrueCount,this.isRejectedCount=t.IsRejectedCount,this.bookingCount=t.BookingCount},t=>{console.error("Error fetching car counts:",t)})}};l.\u0275fac=function(n){return new(n||l)(g(R))},l.\u0275cmp=C({type:l,selectors:[["app-driver-home"]],decls:51,vars:5,consts:[[1,"container","my-5"],[1,"text-center","mb-5",2,"font-weight","bold","color","#333"],[1,"row"],[1,"col-md-6","mb-4"],[1,"card","card-stats","text-center","total-cars-card"],[1,"card-body"],[1,"stat-icon","mb-3"],[1,"fas","fa-car"],[1,"stat-value"],[1,"card","card-stats","text-center","confirmed-cars-card"],[1,"fas","fa-check-circle"],[1,"card","card-stats","text-center","rejected-cars-card"],[1,"fas","fa-times-circle"],[1,"card","card-stats","text-center","bookings-card"],[1,"fas","fa-calendar-check"],[1,"card","card-stats","text-center","earnings-card"],[1,"fas","fa-dollar-sign"],["id","totalEarnings",1,"stat-value"]],template:function(n,o){n&1&&(i(0,"h1"),r(1,"Welcome Back"),e(),i(2,"div",0)(3,"h2",1),r(4,"User Progress"),e(),i(5,"div",2)(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),p(10,"i",7),e(),i(11,"h5"),r(12,"Total Cars"),e(),i(13,"p",8),r(14),e()()()(),i(15,"div",3)(16,"div",9)(17,"div",5)(18,"div",6),p(19,"i",10),e(),i(20,"h5"),r(21,"Confirmed Cars"),e(),i(22,"p",8),r(23),e()()()(),i(24,"div",3)(25,"div",11)(26,"div",5)(27,"div",6),p(28,"i",12),e(),i(29,"h5"),r(30,"Rejected Cars"),e(),i(31,"p",8),r(32),e()()()(),i(33,"div",3)(34,"div",13)(35,"div",5)(36,"div",6),p(37,"i",14),e(),i(38,"h5"),r(39,"Bookings"),e(),i(40,"p",8),r(41),e()()()()(),i(42,"div",3)(43,"div",15)(44,"div",5)(45,"div",6),p(46,"i",16),e(),i(47,"h5"),r(48,"Total Earnings"),e(),i(49,"p",17),r(50),e()()()()()),n&2&&(s(14),_(o.totalCars),s(9),_(o.stateTrueCount),s(9),_(o.isRejectedCount),s(9),_(o.bookingCount),s(9),h("$",o.totalEarnings.toFixed(2),""))},styles:[".card-stats[_ngcontent-%COMP%]{padding:25px;border-radius:15px;box-shadow:0 10px 20px #0000001a;color:#fff;transition:transform .3s ease,box-shadow .3s ease}.card-stats[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 15px 30px #0003}.services-card[_ngcontent-%COMP%]{background:#6f9ee4}.bookings-card[_ngcontent-%COMP%]{background:#f7a278}.confirmed-card[_ngcontent-%COMP%]{background:#78c5a3}.earnings-card[_ngcontent-%COMP%]{background:#f7b267}.stat-icon[_ngcontent-%COMP%]{font-size:3rem}.stat-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-top:10px}.total-cars-card[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.confirmed-cars-card[_ngcontent-%COMP%]{background-color:#ffc107;color:#000}.rejected-cars-card[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.bookings-card[_ngcontent-%COMP%]{background-color:#28a745;color:#fff}.card-stats[_ngcontent-%COMP%]{border-radius:10px;padding:20px;box-shadow:0 4px 8px #0000001a}.stat-icon[_ngcontent-%COMP%]{font-size:2rem}"]});let a=l;return a})();var ht=[{path:"",component:Oe,children:[{path:"home",component:Ue},{path:"add-list-driver",component:Ye},{path:"Car-BookingRequests",component:Be},{path:"Driver-List",component:Le},{path:"edit-Driver/:id",component:je},{path:"See-Deitals/:id",component:Ne},{path:"CarProposel",component:qe},{path:"Driver-Car-Propsosl",component:ze}],canActivate:[ke]}],Xt=(()=>{let l=class l{};l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=ve({type:l}),l.\u0275inj=he({imports:[Pe,ye.forChild(ht),De,Me,Fe.forRoot()]});let a=l;return a})();export{Xt as DriverModule};
